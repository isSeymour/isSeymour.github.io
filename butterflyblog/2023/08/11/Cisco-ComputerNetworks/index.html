<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>《Cisco计网实验》Notes | isSeymour</title><meta name="author" content="isSeymour"><meta name="copyright" content="isSeymour"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="《Cisco计网实验》Notes  长文警告！！！   来源：【教辅视频】Cisco Packet Tracer视频教程 2023.8.8@Seymour0314  第一章、认识软件 1.1 实验  一台二层交换机 两台PC机 直连线互联（连接 FastEthernet 口） 配置PC0、PC1的 IP 分别为 192.168.1.2和192.168.1.3      1.2 测试  打开PC0的">
<meta property="og:type" content="article">
<meta property="og:title" content="《Cisco计网实验》Notes">
<meta property="og:url" content="https://isseymour.github.io/butterflyblog/2023/08/11/Cisco-ComputerNetworks/index.html">
<meta property="og:site_name" content="isSeymour">
<meta property="og:description" content="《Cisco计网实验》Notes  长文警告！！！   来源：【教辅视频】Cisco Packet Tracer视频教程 2023.8.8@Seymour0314  第一章、认识软件 1.1 实验  一台二层交换机 两台PC机 直连线互联（连接 FastEthernet 口） 配置PC0、PC1的 IP 分别为 192.168.1.2和192.168.1.3      1.2 测试  打开PC0的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp">
<meta property="article:published_time" content="2023-08-10T16:00:00.000Z">
<meta property="article:modified_time" content="2023-08-10T16:00:00.000Z">
<meta property="article:author" content="isSeymour">
<meta property="article:tag" content="计网实验">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/IC1011.ico"><link rel="canonical" href="https://isseymour.github.io/butterflyblog/2023/08/11/Cisco-ComputerNetworks/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/butterflyblog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/butterflyblog/',
  algolia: undefined,
  localSearch: {"path":"/butterflyblog/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《Cisco计网实验》Notes',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-11 00:00:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/butterflyblog/code/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/T6.jpg" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/butterflyblog/archives/"><div class="headline">文章</div><div class="length-num">72</div></a><a href="/butterflyblog/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/butterflyblog/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-bookmark"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/archives/"><i class="fa-fw fa-solid fa-timeline"></i><span> 总览</span></a></li><li><a class="site-page child" href="/butterflyblog/tags/"><i class="fa-fw fa-sharp fa-solid fa-hashtag"></i><span> 标签</span></a></li><li><a class="site-page child" href="/butterflyblog/categories/"><i class="fa-fw fa-sharp fa-solid fa-folder"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-list"></i><span> 功能</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/ctf/"><i class="fa-fw fa-solid fa-shield-halved"></i><span> CTF</span></a></li><li><a class="site-page child" href="/butterflyblog/music/"><i class="fa-fw fa-solid fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/butterflyblog/tools/"><i class="fa-fw fa-solid fa-screwdriver-wrench"></i><span> 下载</span></a></li><li><a class="site-page child" href="/butterflyblog/link/"><i class="fa-fw fa-solid fa-paper-plane"></i><span> 链接</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-university"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/algorithm/hot100/"><i class="fa-fw fa-solid fa-fire"></i><span> HOT100</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/labuladong/"><i class="fa-fw fa-solid fa-coffee"></i><span> labuladong</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/luogu/"><i class="fa-fw fa-solid fa-magnet"></i><span> 洛谷</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/template/"><i class="fa-fw fa-solid fa-code"></i><span> Template</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-plane"></i><span> 旅途</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/journey/english/"><i class="fa-fw fa-solid fa-globe"></i><span> 英语</span></a></li><li><a class="site-page child" href="/butterflyblog/journey/RecSys/"><i class="fa-fw fa-solid fa-thumbs-up"></i><span> RecSys</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-regular fa-user"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/about/"><i class="fa-fw fa-regular fa-user"></i><span> 关于我</span></a></li><li><a class="site-page child" href="/butterflyblog/message/"><i class="fa-fw fa-solid fa-message"></i><span> 留言板</span></a></li><li><a class="site-page child" href="/butterflyblog/develop/"><i class="fa-fw fa-brands fa-windows"></i><span> 开发日志</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp')"><nav id="nav"><span id="blog-info"><a href="/butterflyblog/" title="isSeymour"><span class="site-name">isSeymour</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-bookmark"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/archives/"><i class="fa-fw fa-solid fa-timeline"></i><span> 总览</span></a></li><li><a class="site-page child" href="/butterflyblog/tags/"><i class="fa-fw fa-sharp fa-solid fa-hashtag"></i><span> 标签</span></a></li><li><a class="site-page child" href="/butterflyblog/categories/"><i class="fa-fw fa-sharp fa-solid fa-folder"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-list"></i><span> 功能</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/ctf/"><i class="fa-fw fa-solid fa-shield-halved"></i><span> CTF</span></a></li><li><a class="site-page child" href="/butterflyblog/music/"><i class="fa-fw fa-solid fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/butterflyblog/tools/"><i class="fa-fw fa-solid fa-screwdriver-wrench"></i><span> 下载</span></a></li><li><a class="site-page child" href="/butterflyblog/link/"><i class="fa-fw fa-solid fa-paper-plane"></i><span> 链接</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-university"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/algorithm/hot100/"><i class="fa-fw fa-solid fa-fire"></i><span> HOT100</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/labuladong/"><i class="fa-fw fa-solid fa-coffee"></i><span> labuladong</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/luogu/"><i class="fa-fw fa-solid fa-magnet"></i><span> 洛谷</span></a></li><li><a class="site-page child" href="/butterflyblog/algorithm/template/"><i class="fa-fw fa-solid fa-code"></i><span> Template</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-plane"></i><span> 旅途</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/journey/english/"><i class="fa-fw fa-solid fa-globe"></i><span> 英语</span></a></li><li><a class="site-page child" href="/butterflyblog/journey/RecSys/"><i class="fa-fw fa-solid fa-thumbs-up"></i><span> RecSys</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-regular fa-user"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/butterflyblog/about/"><i class="fa-fw fa-regular fa-user"></i><span> 关于我</span></a></li><li><a class="site-page child" href="/butterflyblog/message/"><i class="fa-fw fa-solid fa-message"></i><span> 留言板</span></a></li><li><a class="site-page child" href="/butterflyblog/develop/"><i class="fa-fw fa-brands fa-windows"></i><span> 开发日志</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">《Cisco计网实验》Notes</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-10T16:00:00.000Z" title="发表于 2023-08-11 00:00:00">2023-08-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-10T16:00:00.000Z" title="更新于 2023-08-11 00:00:00">2023-08-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/butterflyblog/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">17.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>68分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="《Cisco计网实验》Notes"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>《Cisco计网实验》Notes</h1>
<blockquote>
<h3 id="长文警告！！！">长文警告！！！</h3>
</blockquote>
<blockquote>
<p>来源：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Xb411Y7i7/">【教辅视频】Cisco Packet Tracer视频教程</a></p>
<p>2023.8.8@Seymour0314</p>
</blockquote>
<h2 id="第一章、认识软件">第一章、认识软件</h2>
<h3 id="1-1-实验">1.1 实验</h3>
<ul>
<li>一台二层交换机</li>
<li>两台PC机</li>
<li>直连线互联（连接 FastEthernet 口）</li>
<li>配置PC0、PC1的 IP 分别为 <code>192.168.1.2</code>和<code>192.168.1.3</code></li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808140520077.png" alt="image-20230808140520077" style="zoom: 80%;" /> 
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808140546448.png" alt="image-20230808140546448" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808140613869.png" alt="image-20230808140613869" style="zoom: 67%;" /></p>
<h3 id="1-2-测试">1.2 测试</h3>
<ul>
<li>打开PC0的cmd，ping PC1</li>
<li>同理 PC1 ping PC0</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808140913617.png" alt="image-20230808140913617" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808140940635.png" alt="image-20230808140940635" style="zoom:67%;" /></p>
<h3 id="1-3-说明">1.3 说明</h3>
<ul>
<li>二层交换机下同属一个广播域，PC0与PC1可以互相通信</li>
</ul>
<h2 id="第二、三章、交换机管理">第二、三章、交换机管理</h2>
<h3 id="2-1-原理">2.1 原理</h3>
<ul>
<li>
<p>交换机有两种管理方法</p>
<ul>
<li>
<p>带内管理</p>
<p>通过Console 端口进行管理</p>
</li>
<li>
<p>带外管理</p>
<p>通过Telnet、拨号等方法远程登录进行管理</p>
</li>
</ul>
<p>第一次配置只能是带内管理。</p>
</li>
</ul>
<h4 id="交换机命令行模式">交换机命令行模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">用户模式	Switch&gt;</span><br><span class="line">特权模式	Switch#</span><br><span class="line">全局配置	Switch(config)#</span><br><span class="line">端口模式	Switch(config-if)#</span><br><span class="line"></span><br><span class="line">en			进入特权模式</span><br><span class="line">conf t		进入全局配置</span><br><span class="line">int fa 0/1	进入交换机端口</span><br><span class="line"></span><br><span class="line">exit		退回上一级模式</span><br><span class="line">end			退到全局模式</span><br><span class="line">shutdown	关闭</span><br><span class="line">no shutdown	开启</span><br><span class="line"></span><br><span class="line">ip routing  #开启三层交换机路由功能（#下）</span><br><span class="line"></span><br><span class="line">show run	查看当前生效的配置信息（#下）</span><br><span class="line">show vlan	查看vlan配置信息（#下）</span><br><span class="line"></span><br><span class="line">show int vlan 1		查看vlan1的具体信息（#下）</span><br><span class="line">show ip route 		查看ip路由配置信息（#下）</span><br><span class="line">show ip protocols	查看路由协议（#下）</span><br><span class="line"></span><br><span class="line">speed		配置交换机端口参数，带宽</span><br><span class="line">duplex		配置交换机端口参数，全双工</span><br><span class="line"></span><br><span class="line">clock rate 64000	设置serial串口时钟频率（进入int se设置）</span><br><span class="line"></span><br><span class="line">reload		重启</span><br><span class="line"></span><br><span class="line">?			帮助信息</span><br><span class="line">houstname	设备重新命名</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>
<p>命令可以简写</p>
<p>如 <code>int fa 0/1</code> 是 <code>interface fastEthernet 0/1</code>的简写</p>
<p>解释：</p>
<ul>
<li>
<p>fa 0/1</p>
<p>fa是fastEthernet线，最高100Mbps</p>
<p>0是这个板卡上的0槽位</p>
<p>1是这个槽位上的1端口</p>
</li>
</ul>
<blockquote>
<p>Gi 0/1的G指Gigabit，千兆以太网接口。</p>
</blockquote>
</li>
<li>
<p>Tab 键可以补全</p>
</li>
</ul>
</blockquote>
<h3 id="2-2-实验">2.2 实验</h3>
<p>采用 Telnet 远程登录配置交换机</p>
<ul>
<li>
<p>配置交换机 IP 地址（计算机 IP 和交换机 IP 必须属于同一个网段）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Switch(config)#int vlan 1</span><br><span class="line">Switch(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown</span><br></pre></td></tr></table></figure>
<blockquote>
<p>一般来说，二层交换机是不需要 IP 地址的，因为没有网络层功能。</p>
<p>这里却配置了IP地址，是因为要通过PC机远程登陆交换机，所以需要设置 IP 地址。</p>
</blockquote>
</li>
<li>
<p>为 Telnet 用户配置用户名、登陆口令</p>
<ul>
<li>
<p>密码1：进入特权模式的密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Switch(config)#enable password 123456</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>密码2：console口连接、Telnet远程登录等的密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Switch(config)#line console 0</span><br><span class="line">Switch(config-line)#password 123abc</span><br><span class="line">Switch(config-line)#login</span><br><span class="line"></span><br><span class="line">Switch(config)#line vty 0 4</span><br><span class="line">Switch(config-line)#password 123abc</span><br><span class="line">Switch(config-line)#login</span><br><span class="line"></span><br><span class="line">配置好了之后，可以查看一下</span><br><span class="line">Switch#show run</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>实验步骤</p>
<ul>
<li>
<p>一台交换机2960</p>
</li>
<li>
<p>一台PC机</p>
</li>
<li>
<p>Consle线连接（PC机-RS232口、交换机-Console口）</p>
</li>
<li>
<p>直连线（fastEthernet口）</p>
</li>
<li>
<p>打开PC 终端，是Switch 的配置终端</p>
</li>
<li>
<p>配置 Switch IP地址为<code>192.168.1.1</code></p>
</li>
<li>
<p>配置特权模式密码、配置Telent远程登录密码</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145419593.png" alt="image-20230808145419593" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145358929.png" alt="image-20230808145358929" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145451238.png" alt="image-20230808145451238" style="zoom:67%;" /></p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145708527.png" alt="image-20230808145708527" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145734877.png" alt="image-20230808145734877" style="zoom:67%;" /></p>
<h3 id="2-3-测试">2.3 测试</h3>
<ul>
<li>
<p>配置PC机自己的 IP 在同一个网段下</p>
<blockquote>
<p>此时已经可以吧Console线去掉了，不需要了。</p>
</blockquote>
</li>
<li>
<p>ping 交换机测试</p>
</li>
<li>
<p>telnet登陆测试</p>
<p>登陆密码是前面设置的abc123</p>
<p>特权模式密码是前面设置的123456</p>
<blockquote>
<p>输入密码时，会看不到输入，但是实际上输入了</p>
</blockquote>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808145935899.png" alt="image-20230808145935899" style="zoom:67%;" />  <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808150049471.png" alt="image-20230808150049471" style="zoom:67%;" /></p>
<h2 id="第四章、交换机VLAN划分">第四章、交换机VLAN划分</h2>
<h3 id="4-1-原理">4.1 原理</h3>
<ul>
<li>
<p>VLAN</p>
<p>Virtual LAN，虚拟局域网</p>
</li>
<li>
<p>通过二层交换机的VLAN设置，使得同一物理区域的PC机，属于不同的逻辑区域，隔离广播域、冲突域。</p>
<p>同一VLAN下的PC可以相互通信，不同VLAN下的PC不能直接通信。</p>
<p>不同VLAN下的PC的通信需要经过三层交换机，后面介绍，这里只做二层交换机实验。</p>
</li>
<li>
<p>划分VLAN的两种方法</p>
<ul>
<li>
<p>Port VLAN</p>
<p>交换机的同一端口下的PC只能属于同一个VALN</p>
</li>
<li>
<p>Tag VLAN</p>
<p>遵循 IEEE802.1q 协议标准，数据帧内添加4字节的802.1q标签信息，用于标识该数据帧属于哪个VLAN，便于对端交换机接收到后进行过滤。</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>交换机的端口类型，可以分为以下两种：</p>
<ul>
<li>
<p><strong>（1）访问链接（Access Link）</strong></p>
<p>访问链接，指的是“只属于一个VLAN，且仅向该VLAN转发数据帧”的端口。在大多数情况下，访问链接所连的是客户机。</p>
<p>通常设置VLAN的顺序是：（1）生成VLAN（2）设定访问链接（决定各端口<strong>属于</strong>哪一个VLAN）</p>
<p>设定访问链接的手法，可以是事先固定的、也可以是根据所连的计算机而动态改变设定。</p>
<ul>
<li>
<p>前者被称为“静态VLAN”</p>
<p>静态VLAN又被称为基于端口的VLAN（PortBased VLAN）。</p>
<p>顾名思义，就是明确指定各端口属于哪个VLAN的设定方法。</p>
</li>
<li>
<p>后者自然就是“动态VLAN”</p>
<p>动态VLAN则是根据每个端口所连的计算机，随时改变端口所属的VLAN。</p>
<p>分为3类：（1）基于MAC地址的VLAN（MAC Based VLAN）（2）基于子网的VLAN（Subnet Based VLAN）（3）基于用户的VLAN（User Based VLAN）</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809002315109.png" alt="image-20230809002315109" style="zoom: 67%;" /> 
<p>其间的差异，主要在于根据OSI参照模型哪一层的信息决定端口所属的VLAN。</p>
</li>
</ul>
</li>
<li>
<p><strong>（2）汇聚链接（Trunk Link）</strong></p>
<p>汇聚链接（Trunk Link）指的是能够转发多个不同VLAN的通信的端口。</p>
<p>在交换机的汇聚链接上，可以通过对数据帧附加VLAN信息，构建跨越多台交换机的VLAN。</p>
<p>附加VLAN信息的方法，最具有代表性的有：</p>
<ul>
<li>
<p>IEEE 802.1Q</p>
<p>俗称“Dot One Q”，是经过IEEE认证的对数据帧附加VLAN识别信息的协议。</p>
</li>
<li>
<p>ISL</p>
<p>Cisco产品支持的一种与IEEE 802.1Q类似的、用于在汇聚链路上附加VLAN信息的协议。</p>
</li>
</ul>
<p>另外，汇聚链路上流通着多个VLAN的数据，自然负载较重。</p>
<p>因此，在设定汇聚链接时，有一个<strong>前提</strong>就是必须支持100Mbps以上的传输速度。</p>
</li>
</ul>
</blockquote>
<h3 id="4-2-实验">4.2 实验</h3>
<ul>
<li>两台交换机2960</li>
<li>四台PC机</li>
<li>直连线连接（fastEthernet，交换机之间连fa0/24）</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808153231479.png" alt="image-20230808153231479" style="zoom:67%;" /> 
<ul>
<li>
<p>配置PC机IP地址为<code>192.168.1.1</code>到<code>192.168.1.4</code>，不用设置网关。</p>
</li>
<li>
<p>测试ping</p>
<p>从PC0去ping其他所有PC，都是能通的。</p>
<p>也就是说，同属于一个LAN。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808153409161.png" alt="image-20230808153409161" style="zoom:67%;" /> 
</li>
<li>
<p>交换机划分VLAN</p>
<p>打开Switch-CLI窗口，划分vlan如下：</p>
<p>创建vlan2、vlan3，把端口划分进对应vlan，交换机之间设置trunk模式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#vlan 2</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 3</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport access vlan 2</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 3</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/24</span><br><span class="line">Switch(config-if)#switchport mode trunk</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>两个交换机都操作（完全相同操作）</p>
<p><code>show vlan</code>查看vlan设置</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808154004077.png" alt="image-20230808154004077" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808154109397.png" alt="image-20230808154109397" style="zoom:67%;" /></p>
</li>
</ul>
<h3 id="4-3-测试">4.3 测试</h3>
<ul>
<li>
<p>实验过程中已经测过一次</p>
<p>PC0到其他所有PC都能通</p>
</li>
<li>
<p>现在重新测试PC0到其他所有PC</p>
<ul>
<li>PC0属于vlan 2</li>
<li>只能ping通同属于vlan 2 的PC2</li>
<li>其他ping 不通</li>
</ul>
</li>
<li>
<p>换一个，PC1同理只能ping通 PC3</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808155142189.png" alt="image-20230808155142189" style="zoom:67%;" />  <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808155034124.png" alt="image-20230808155034124" style="zoom:67%;" /></p>
<h2 id="第五章、三层交换机实现VLAN间路由">第五章、三层交换机实现VLAN间路由</h2>
<blockquote>
<p>详细资料：</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pwc1996/p/5957858.html">不同VLAN之间互相通信</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/phunxm/article/details/9498829">VLAN原理详解</a></p>
</li>
</ul>
</blockquote>
<h3 id="5-1-原理">5.1 原理</h3>
<ul>
<li>
<p>VLAN是广播域。</p>
<p>而通常两个广播域之间由路由器连接，广播域之间来往的数据包都是由<strong>路由器中继</strong>的。</p>
<p>因此，VLAN间的通信也需要路由器提供中继服务，这被称作“<strong>VLAN间路由</strong>”。</p>
<p>VLAN间路由，可以使用普通的路由器，也可以使用三层交换机。</p>
</li>
<li>
<p>三层交换机具备网络层功能，能够实现 VLAN 间的访问。</p>
<p>利用三层交换机的路由功能，通过识别数据包的 IP 地址，查找路由表并选路转发。</p>
</li>
<li>
<p>三层交换机给接口配置 IP 地址，采用 SVI（交换机虚拟接口）的方式实现 VLAN 间互联。</p>
<p>SVI 是指为交换机中的 VLAN 创建虚拟接口，并配置 IP 地址。</p>
</li>
</ul>
<h4 id="VLAN间路由原理">VLAN间路由原理</h4>
<blockquote>
<ul>
<li>
<p>两台计算机即使连接在同一台交换机上，只要所属的VLAN不同就无法直接通信。</p>
<p>为什么？</p>
<p>在LAN内的通信，必须在数据帧头中指定通信目标的MAC地址。而为了获取MAC地址，TCP/IP协议下使用的是ARP。ARP解析MAC地址的方法，则是通过广播。计算机分属不同的VLAN，也就意味着分属不同的广播域，自然收不到彼此的广播报文。</p>
</li>
<li>
<p>为了能够在VLAN间通信，需要利用OSI参照模型中<strong>更高一层</strong>——网络层的信息（IP地址）来进行<strong>路由</strong>。</p>
</li>
<li>
<p>方法</p>
<p>先将用于连接路由器的交换机端口设为汇聚链接（Trunk Link），而路由器上的端口也必须支持汇聚链路。双方用于汇聚链路的协议自然也必须相同。接着在路由器上定义对应各个VLAN的“子接口”（Sub Interface）。</p>
<p>尽管实际路由器与交换机连接的物理端口只有一个，但在理论上我们可以把它分割为多个虚拟端口。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809003629996.png" alt="image-20230809003629996" style="zoom:67%;" /> 
<p>交换机通过对各端口所连计算机MAC地址的学习，生成如下的MAC地址列表。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809003651516.png" alt="image-20230809003651516" style="zoom: 50%;" /> 
<p>分析：</p>
<ul>
<li>
<p>同一VLAN内的通信：A --&gt; B</p>
<p>交换机查VLAN1下的MAC表，直接发给了B</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809003844623.png" alt="image-20230809003844623" style="zoom:67%;" /> 
</li>
<li>
<p>不同VLAN间的通信：A --&gt; C</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809003956228.png" alt="image-20230809003956228" style="zoom:67%;" /> 
<p>计算机A从通信目标的IP地址（192.168.2.1）得出C与本机不属于同一个网段。</p>
<p>因此会向设定的默认网关（DefaultGateway，GW）转发数据帧。在发送数据帧前，需要先用<strong>ARP</strong>获取路由器的MAC地址。</p>
<p>得到路由器的MAC地址R后，接下来就是按图中所示的步骤发送往C去的数据帧。①的数据帧中，目标<strong>MAC地址</strong>是路由器的地址R、但内含的<strong>目标IP地址</strong>仍是最终要通信的对象C的地址。</p>
<p>交换机在端口1上收到①的数据帧后，检索MAC地址列表中与端口1同属一个VLAN的表项。由于汇聚链路会被看作属于所有的VLAN，因此这时交换机的端口6也属于被参照对象。这样交换机就知道往<strong>MAC地址</strong>R发送数据帧，需要经过端口6转发。</p>
<p>从端口6发送数据帧时，由于它是<strong>汇聚链接</strong>，因此会被<strong>附加</strong>上VLAN识别信息。由于原先是<strong>来自红色</strong>VLAN的数据帧，因此如图中②所示，会被<strong>加上红色</strong>VLAN的识别信息后进入汇聚链路。路由器收到②的数据帧后，确认其VLAN识别信息，由于它是<strong>属于红色</strong>VLAN的数据帧，因此<strong>交由负责红色</strong>VLAN的子接口接收。</p>
<p>接着，根据路由器内部的<strong>路由表</strong>，判断该向哪里中继。</p>
<p>由于目标网络192.168.2.0/24是蓝色VLAN，，且该网络通过<strong>子接口</strong>与路由器直连，因此只要从<strong>负责蓝色</strong>VLAN的<strong>子接口转发</strong>就可以了。这时，数据帧的目标MAC地址被<strong>改写</strong>成计算机C的目标地址；并且由于需要<strong>经过汇聚链路转发</strong>，因此被<strong>附加</strong>了属于<strong>蓝色</strong>VLAN的识别信息。这就是图中③的数据帧。</p>
<p>交换机收到③的数据帧后，根据VLAN标识信息从MAC地址列表中检索属于蓝色VLAN的表项。由于通信目标——计算机C连接在端口3上、且端口3为普通的访问链接，因此交换机会将数据帧<strong>去除</strong>VLAN识别信息后（数据帧④）转发给端口3，最终计算机C才能成功地收到这个数据帧。</p>
<p>注：进行VLAN间通信时，即使通信双方都连接在同一台交换机上，也必须经过：“发送方——交换机——路由器——交换机——接收方”这样一个流程。</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="路由器与交换机">路由器与交换机</h4>
<blockquote>
<ul>
<li>
<p>路由器，则基本上是基于软件处理的。</p>
</li>
<li>
<p>三层交换机，本质上就是“有第三层路由功能的（二层）交换机”。</p>
<p>与传统的路由器相比，可以实现高速路由。</p>
<p>并且，路由与交换模块是汇聚链接的，由于是内部连接，可以确保相当大的带宽。</p>
<p><strong>VLAN接口</strong>，是用于各VLAN收发数据的接口。</p>
<p>（注：在Cisco的Catalyst系列交换机上，VLAN Interface被称为SVI——Switched Virtual Interface）</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809004858899.png" alt="image-20230809004858899" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809005057754.png" alt="image-20230809005057754" style="zoom: 50%;" /></p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809005359698.png" alt="image-20230809005359698" style="zoom:67%;" /> 
<ul>
<li>
<p>既然三层交换机能够提供比传统型路由器更为高速的路由处理，那么网络中还有使用路由器的必要吗？</p>
<p>使用路由器的必要性，主要表现在以下几个方面：</p>
<p>（1）用于与WAN连接</p>
<p>（2）保证网络安全</p>
<p>（3）支持除TCP/IP以外的异构网络架构</p>
</li>
<li>
<p>下面让我们来看一个路由器和交换机搭配构建LAN的实例。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809010007772.png" alt="image-20230809010007772" style="zoom:80%;" /> 
<p>利用在各楼层配置的二层交换机定义VLAN，连接TCP/IP客户计算机。各楼层间的VLAN间通信，利用三层交换机的高速路由加以实现。如果网络环境要求高可靠性，还可以考虑冗余配置三层交换机。</p>
<p>与WAN的连接，则通过带有各种网络接口的路由器进行。并且，通过路由器的数据包过滤和VPN等功能实现网络安全。此外，使用路由器还能支持Novell Netware等TCP/IP之外的网络。</p>
<p>只有在充分掌握了二层、三层交换机以及传统路由器的基础上，才能做到物竞其用，构筑出高效率、高性价比的网络。</p>
</li>
<li>
<p>例：分析下面的网络</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809011747934.png" alt="image-20230809011747934" style="zoom:50%;" /> 
</li>
</ul>
</blockquote>
<h3 id="5-2-实验">5.2 实验</h3>
<ul>
<li>三层交换机3560一台</li>
<li>二层交换机2960一台</li>
<li>PC机三台</li>
<li>直连线连接</li>
<li>设置PC机 IP 和网关</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808184117306.png" alt="image-20230808184117306" style="zoom:67%;" /> 
<ul>
<li>配置二层交换机的vlan2、vlan3并连接到对应接口</li>
<li>配置二层交换机trunk口</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#vlan 2</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 3</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 2</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/3</span><br><span class="line">Switch(config-if)#switchport access vlan 3</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport mode trunk </span><br></pre></td></tr></table></figure>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808190553126.png" alt="image-20230808190553126" style="zoom:67%;" /> 
<ul>
<li>
<p>配置三层交换机</p>
<p>创建vlan2、vlan3，连接vlan下的PC机</p>
<p>创建vlan2、vlan3的SVI，配置 IP 地址，并开启</p>
<p>开启三层交换机的路由功能，开始工作</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#vlan 2</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 3</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 2</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line"></span><br><span class="line">Switch(config)#int vlan 2</span><br><span class="line">Switch(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 3</span><br><span class="line">Switch(config-if)#ip address 192.168.2.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line"></span><br><span class="line">Switch(config)#ip routing  #开启三层交换机路由功能</span><br><span class="line">Switch(config)#end</span><br><span class="line"></span><br><span class="line">Switch#show ip route	#查看路由配置</span><br></pre></td></tr></table></figure>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808190347880.png" alt="image-20230808190347880" style="zoom:67%;" /> 
<h3 id="5-3-测试">5.3 测试</h3>
<ul>
<li>由PC0 去ping其他主机，均能通</li>
<li>由PC1 去ping其他主机，均能通</li>
<li>由PC2 去ping其他主机，均能通</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808190749565.png" alt="image-20230808190749565" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808190834265.png" alt="image-20230808190834265" style="zoom:67%;" /></p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230808191018147.png" alt="image-20230808191018147" style="zoom:67%;" /> 
<h2 id="第六章、快速生成树RSTP">第六章、快速生成树RSTP</h2>
<h3 id="6-1-原理">6.1 原理</h3>
<ul>
<li>
<p>生成树协议（spanning-tree）</p>
<p>作用是在交换网络中提供冗余备份链路，并且解决交换网络中的环路问题。</p>
</li>
<li>
<p>生成树协议是利用SPA算法，在存在交换环路的网络中生成一个没有环路的树形网络。</p>
<p>运用该算法将交换网络的冗余备份链路从逻辑上断开，当主链路出现故障时，能够自动的切换到备份链路，保证数据的正常转发。</p>
</li>
<li>
<p>生成树协议版本</p>
<ul>
<li>STP</li>
<li>RSTP（快速生成树协议）</li>
<li>MSTP（多生成树协议）</li>
</ul>
</li>
<li>
<p>生成树协议特点</p>
<p>收敛时间长，从主要链路出现故障，到切换至备份链路需要50秒的时间。</p>
<p>快速生成树协议在生成树协议的基础上，增加了两种端口角色：替换端口、备份端口，分别作为根端口和指定端口的冗余端口。</p>
<p>当根端口或指定端口出现故障时，冗余端口不需要经过50秒的收敛时间，可以直接切换到替换端口或备份端口，从而实现RSTP的小于1秒的快速收敛。</p>
</li>
</ul>
<h3 id="6-2-实验">6.2 实验</h3>
<ul>
<li>二层交换机2960两台</li>
<li>PC机两台</li>
<li>直连线连接（二层交换机之间连两次）</li>
<li>设置PC机 IP 地址</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809020343067.png" alt="image-20230809020343067" style="zoom:67%;" /> 
<ul>
<li>
<p>二层交换机配置</p>
<ul>
<li>划分vlan10进对应端口</li>
<li>把汇聚端口的一组端口，设置为trunk模式</li>
<li>打开spanning-tree的RSTP协议</li>
<li>查看spanning-tree状态</li>
</ul>
<p>两台二层交换机一样的设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#int fa 0/10</span><br><span class="line">Switch(config-if)#switchport access vlan 10</span><br><span class="line">% Access VLAN does not exist. Creating vlan 10</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int range fa 0/1 - 2</span><br><span class="line">Switch(config-if-range)#switchport mode trunk</span><br><span class="line">Switch(config-if-range)#exit</span><br><span class="line">Switch(config)#spanning-tree mode rapid-pvst </span><br><span class="line">Switch(config)#end</span><br><span class="line">Switch#show spanning-tree </span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809020226590.png" alt="image-20230809020226590" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809020325914.png" alt="image-20230809020325914" style="zoom:50%;" /></p>
</li>
</ul>
<h3 id="6-3-测试">6.3 测试</h3>
<ul>
<li>
<p>可以看到上面的spanning-tree的状态</p>
<p>目前是S0的Fa 0/2是Block堵塞状态，所以说，并不会出现环路，网络通信正常。</p>
</li>
<li>
<p>我们让PC0去不停的ping PC1</p>
<p>在此期间，把S1原来用来通信的fa 0/1给关闭shutdown，</p>
<p>那么S1只能使用fa 0/2通信了，而对应的S0必须把原来堵塞的fa 0/2给打开。</p>
<p>我们测试一下，看看是不是很快就会自动打开了</p>
<p>（通过看PC0 不停ping PC1的过程中，有没有丢包）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># PC0打开cmd</span><br><span class="line">C:\&gt;ping -t 192.168.1.2</span><br><span class="line"></span><br><span class="line"># 然后S1断开fa 0/1</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#shutdown</span><br></pre></td></tr></table></figure>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809020946725.png" alt="image-20230809020946725" style="zoom:67%;" /> 
</li>
<li>
<p>可以看到，整个过程中，都没有丢包。</p>
<p>在拓扑图也可以发现，S0与S1之间的路线变了（绿色、红色点变了），说明确实更换了路线。</p>
<p>可见，快速生成树协议切换速度很快，快到甚至不会丢包（小于1秒）。</p>
</li>
</ul>
<h2 id="第七章、路由器的基本配置">第七章、路由器的基本配置</h2>
<h3 id="7-1-原理">7.1 原理</h3>
<ul>
<li>
<p>管理，与交换机一样</p>
<ul>
<li>带内管理，Console 端口</li>
<li>带外管理，telent 远程连接</li>
</ul>
</li>
<li>
<p>路由器与三层交换机</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">三层交换机配置端口IP：创建vlan，划分端口进vlan，再进入int vlan配置网关IP，开启端口</span><br><span class="line">（且需要ip routing 命令打开三层交换机的路由功能）</span><br><span class="line">ip routing</span><br><span class="line">vlan 10</span><br><span class="line">exit</span><br><span class="line">int fa 0/1</span><br><span class="line">switch access vlan 10</span><br><span class="line">exit</span><br><span class="line">int vlan 10</span><br><span class="line">ip address 192.168.1.1 255.255.255.0</span><br><span class="line">no shutdown</span><br><span class="line"></span><br><span class="line">路由器配置端口IP：直接进入对应端口，开启物理端口，配置端口IP作为网关</span><br><span class="line">int fa 0/0</span><br><span class="line">no shutdown</span><br><span class="line">ip address 192.168.1.1 255.255.255.0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="路由器命令行模式">路由器命令行模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 与交换机一样</span><br><span class="line"># 还有</span><br><span class="line">router rip				配置RIP协议信息</span><br><span class="line">router ospf				配置OSPF协议信息</span><br><span class="line">show ip route			查看路由信息（#下）</span><br><span class="line">show ip protocols		查看路由协议（#下）</span><br></pre></td></tr></table></figure>
<h3 id="7-2-实验">7.2 实验</h3>
<ul>
<li>
<p>路由器2811一台</p>
</li>
<li>
<p>PC机一台</p>
</li>
<li>
<p>console线（蓝色线）连接PC-RS232口、路由器-console口</p>
</li>
<li>
<p>交叉线（黑色虚线）连接PC-fa口、路由器fa口</p>
<blockquote>
<ul>
<li>
<p>PC机与交换机直接相连，是用直连线（黑色实线）</p>
</li>
<li>
<p>PC机与路由器直接相连，是用交叉线（黑色虚线）</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>设置PC机IP配置</p>
<p>IPv4：192.168.1.2</p>
<p>子网掩码：255.255.255.0</p>
<p>网关：192.168.1.1</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809131005748.png" alt="image-20230809131005748" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809131026999.png" alt="image-20230809131026999" style="zoom:67%;" /></p>
<ul>
<li>
<p>路由器配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line"></span><br><span class="line">查看配置情况</span><br><span class="line">Router(config-if)#end</span><br><span class="line">Router#show running-config </span><br><span class="line">看到有以下的内容即可</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line"> </span><br><span class="line">配置远程登录密码</span><br><span class="line">Router#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Router(config)#enable password 123456	设置特权模式密码</span><br><span class="line">Router(config)#line vty 0 4				设置远程登录密码</span><br><span class="line">Router(config-line)#password 123abc</span><br><span class="line">Router(config-line)#login</span><br><span class="line">Router(config-line)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="7-3-测试">7.3 测试</h3>
<ul>
<li>
<p>可以把console线（蓝色）取消了</p>
</li>
<li>
<p>先在PC机cmd窗口ping网关192.168.1.1</p>
<p>能ping通</p>
</li>
<li>
<p>再尝试远程登陆路由器</p>
<p>telent 192.168.1.1</p>
<p>登陆密码是刚刚设置的123abc</p>
<p>特权模式密码是刚刚设置的123456</p>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809132109645.png" alt="image-20230809132109645" style="zoom:67%;" /> 
<h2 id="第八章、路由器单臂路由">第八章、路由器单臂路由</h2>
<h3 id="8-1-原理">8.1 原理</h3>
<ul>
<li>
<p>效果：可以实现原来不同VLAN之间的互联互通。</p>
</li>
<li>
<p>单臂路由（router-on-a-stick）</p>
<p>是指在路由器的一个接口上通过配置子接口（或“逻辑接口”，并不存在真正物理接口）的方式，实现原来相互隔离的不同VLAN之间的互联互通。</p>
</li>
<li>
<p>单臂路由子接口</p>
<p>路由器的物理接口可以被划分成多个<strong>逻辑接口</strong>，这些被划分后的逻辑接口被形象的称为<strong>子接口</strong>。值得注意的是这些逻辑子接口不能被单独的开启或关闭，也就是说，当物理接口被开启或关闭时，所有的该接口的子接口也随之被开启或关闭。</p>
</li>
<li>
<p>其实本质上，和前面的第五章原理类似</p>
<p>第五章是三层交换机的vlan间通信，通过虚拟接口SVI实现。</p>
<p>这里是路由器的vlan间通信，通过单臂路由实现。</p>
<p>两者都是通过第三层网络层实现的，只是实现细节不同，前面是通过vlan出现虚拟端口，这里是.1.2实现子端口。</p>
</li>
</ul>
<h3 id="8-2-实验">8.2 实验</h3>
<ul>
<li>
<p>路由器2811一台</p>
</li>
<li>
<p>二层交换机2960一台</p>
</li>
<li>
<p>PC机两台</p>
</li>
<li>
<p>直连线连接PC机、二层交换机</p>
</li>
<li>
<p>交叉线连接二层交换机、路由器</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809170922603.png" alt="image-20230809170922603" style="zoom: 67%;" /> 
</li>
<li>
<p>配置主机的IP</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809165608173.png" alt="image-20230809165608173" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809165640405.png" alt="image-20230809165640405" style="zoom:67%;" /></p>
</li>
<li>
<p>二层交换机划分vlan、设置trunk</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#vlan 10</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 20</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 10</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/3</span><br><span class="line">Switch(config-if)#switchport access vlan 20</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport mode trunk </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line"></span><br><span class="line">Switch#show running-config </span><br></pre></td></tr></table></figure>
</li>
<li>
<p>路由器开启物理端口，打开子端口、封装协议、配置 IP</p>
<blockquote>
<p>这里是进行vlan间路由的，所以打开子端口设置IP，</p>
<p>实际上，本身可以直接对 <code>int fa 0/0</code>进行<code>ip address</code>设置的。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int fa 0/0.1</span><br><span class="line">Router(config-subif)#encapsulation dot1Q 10</span><br><span class="line">Router(config-subif)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Router(config-subif)#exit</span><br><span class="line">Router(config)#int fa 0/0.2</span><br><span class="line">Router(config-subif)#encapsulation dot1Q 20</span><br><span class="line">Router(config-subif)#ip address 192.168.2.1 255.255.255.0</span><br><span class="line">Router(config-subif)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置</span><br><span class="line">Router#show running-config </span><br><span class="line">看到有下面的内容就可以了</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/0.1</span><br><span class="line"> encapsulation dot1Q 10</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/0.2</span><br><span class="line"> encapsulation dot1Q 20</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0</span><br><span class="line">!</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="8-3-测试">8.3 测试</h3>
<ul>
<li>
<p>测试两个PC机相互ping，均能通。</p>
<p>我们先ping了网关，然后ping对方主机，发现ping对方主机的第一次是丢包的。</p>
<p>这是正常的，因为第一次路由器的路由表中还没有记录去往对方主机的路由，会丢包。</p>
<p>而之后PC1再来ping PC0时，为什么没有丢包呢？因为路由器在前面已经记录了路由，会自动学习。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809171054136.png" alt="image-20230809171054136" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809171130835.png" alt="image-20230809171130835" style="zoom:67%;" /></p>
</li>
</ul>
<h2 id="第九章、路由器静态路由">第九章、路由器静态路由</h2>
<blockquote>
<p>详细来源：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42857944/article/details/128247989">静态路由（Static Routing）</a></p>
</blockquote>
<h3 id="9-1-原理">9.1 原理</h3>
<ul>
<li>
<p>路由表的形成</p>
<ul>
<li>
<p>直连路由</p>
<p>本地接口配置IP地址和子网掩码，端口开启后，形成的路由</p>
</li>
<li>
<p>非直连路由</p>
<p>不是本地接口配置IP地址和子网掩码，接口开启后，形成的路由</p>
<p><strong>对于非直连路由的学习，有两种方式：</strong></p>
<ul>
<li>静态路由（管理员手动添加）</li>
<li>动态路由（路由器通过路由协议自动学习）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>静态路由的特点<br>
管理员添加的路由的传输方向是单向的</p>
<ul>
<li>
<p>优点：配置灵活，管理员手工配置，节省链路开销</p>
</li>
<li>
<p>缺点：当拓扑发生改变时，需要管理员去每台路由器上修改路由配置</p>
</li>
</ul>
<p>建议五条以内的非直连路由用静态路由协议，五条以上的用动态路由协议<br>
静态路由协议只能用于小规模的企业网络，大型企业网络用的是动态路由协议</p>
</li>
</ul>
<h4 id="案例剖析">案例剖析</h4>
<blockquote>
<h5 id="案例1-静态路由配置">案例1(静态路由配置)</h5>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809180642495.png" alt="image-20230809180642495" style="zoom: 67%;" /> 
<p>图中，路由器R1和R2通过接口0和接口1所配置的IP地址和子网掩码，可自动得到每个接口所在的网络。同时，接口与网络直连，属于直接交付。R1，R2最基本的路由表如下表所示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809180709479.png" alt="image-20230809180709479" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809180722817.png" alt="image-20230809180722817" style="zoom:67%;" /></p>
<p>假设网络子网1中的主机A向子网3中的主机B发送数据报，从图中可以看出，数据报的转发顺序为：主机AR1接口0  R1接口1  R2接口0  R2接口1 主机B。</p>
<p>可是R1 现有的路由表中并没有关于子网3的路由条目，即R1并不知道目的网络的存在。因此，我们可以给路由器R1添加一条到达子网3的路由条目，如下表所示。</p>
<p>这样，子网1中的主机就可以将数据报发送至子网3的主机。</p>
<p>同理，若想子网3中的主机能向子网1中的主机发送数据报，则路由器R2的路由表应配置为如下所示。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809180827358.png" alt="image-20230809180827358" style="zoom:67%;" />     <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809180858227.png" alt="image-20230809180858227" style="zoom:67%;" /></p>
<h5 id="案例2-默认路由配置">案例2(默认路由配置)</h5>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809181104776.png" alt="image-20230809181104776" style="zoom:67%;" /> 
<p>假设子网1中的主机A向因特网发送数据报，从图中可以看出，数据报的转发顺序为：主机AR1接口0  R1接口1  R2接口0  R2接口3 因特网的某个主机。</p>
<p>正如案例1中总结，如果我们在路由器R1中逐个添加通往因特网的路由条目，一方面不符合实际需求，另一方面会使得路由器的路由表非常庞大，降低查表转发速度，因此我们可以通过添加默认路由解决这一问题。</p>
<p>默认路由条目用于替代具有相同下一跳的不同目的网络的路由条目，默认路由条目的目的网络为0.0.0.0，地址掩码为0.0.0.0，因此R1的路由表可配置为如下所示。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809181142879.png" alt="image-20230809181142879" style="zoom:67%;" /> 
<blockquote>
<ul>
<li>
<p>我们可以发现如果我们从子网1发送数据报到子网3，数据报既可以走目的网络为192.168.2.0/24的路由条目，也可以走目的网络为0.0.0.0/0的默认路由条目，那数据报到底会走哪一条路由条目呢？</p>
<p>由于192.168.2.0/24的网络前缀更长，所以路由也就更具体。而默认路由的网络前缀较短，路由也就更模糊， 因此当路由器查表转发IP数据报时，若有多条路由条目可选，通常会采用<strong>最长前缀匹配原则</strong>，选择目的网络前缀最长的那条路由条目进行转发 。所以如果子网1的主机向子网3的主机发送数据报，<strong>会走192.168.2.0/24</strong>这一路由条目。</p>
</li>
<li>
<p>路由环路问题的解决方案？</p>
<ul>
<li>
<p><strong>静态路由配置错误</strong></p>
<p>为了防止IP数据报在路由环路中永久兜圈，在 IP数据报首部中设置了生存时间TTL字段，数据报每进入一个路由器，TTL字段的值便会减1，若TTL的值不为0，则路由器继续转发该IP数据报，否则便丢弃这个IP数据报。</p>
</li>
<li>
<p><strong>聚合了不存在网络</strong></p>
<p>所谓聚合网络，就是将若干个网络的共同前缀保持不变，其余位取0，同时将相同前缀的个数写在斜线后面，如下图所示。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809181711255.png" alt="image-20230809181711255" style="zoom:50%;" /> 
<p>我们可以在路由表中用192.168.0.0/22表示192.168.0.0/24，192.168.1.0/24，192.168.2.0/24以及192.168.3.0/24四个网络。</p>
<p>我们可以在路由表中针对不存在的网络添加黑洞路由来解决上述问题，黑洞路由的下一跳为null0，这是路由器内部的虚拟接口，IP数据报进入后便会被自动丢弃。 我们可以将路由器R2的路由表设置为如下所示：</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809181819953.png" alt="image-20230809181819953" style="zoom: 67%;" /> 
<p>若按上表配置，当路由器R2向一个不存在的子网(192.168.3.0/24)发送数据报，路由器会根据最长前缀匹配原则选择目的网络为192.168.3.0/24的路由条目，该条目的下一跳为虚拟接口null0，这样，该IP数据报便会被快速丢弃。</p>
</li>
<li>
<p><strong>网络故障</strong></p>
<p>我们可以针对故障的网络(192.168.1.0/24)添加黑洞路由。经过一段时间后，路由器R1的0号接口网络恢复正常，R1又自动得到了192.168.1.0/24的直连路由条目， 则我们先前设置的黑洞路由会自动失效。</p>
</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
<h3 id="9-2-实验">9.2 实验</h3>
<h4 id="搭建拓扑">搭建拓扑</h4>
<ul>
<li>路由器Router-PT两台</li>
<li>二层交换机2960两台</li>
<li>PC机两台</li>
<li>直连线（黑色直线Copper Straight-Through）连接PC机、二层交换机（Fa口）</li>
<li>交叉线（黑色虚线Copper Cross-Over）连接二层交换机、路由器（Fa口）</li>
<li>串口线（红色带钟Serial DCE）连接两台路由器（Serial口）</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809190642907.png" alt="image-20230809190642907" style="zoom:67%;" /> 
<h4 id="配置IP">配置IP</h4>
<ul>
<li>
<p>配置主机IP</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809184722567.png" alt="image-20230809184722567" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809184748606.png" alt="image-20230809184748606" style="zoom:67%;" /></p>
</li>
<li>
<p>二层交换机不用配置</p>
</li>
<li>
<p>路由器配置</p>
<p>开启fa端口，配置 IP</p>
<p>开启se端口，配置IP，设置时钟</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#no shutdown</span><br><span class="line">Router(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#no shutdown</span><br><span class="line">Router(config-if)#ip address 192.168.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line"></span><br><span class="line">Router#show run</span><br><span class="line">看到有以下内容即可</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.1 255.255.255.0</span><br><span class="line"> clock rate 64000</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">另一台路由器看到的应该是</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.2 255.255.255.0</span><br><span class="line">!</span><br></pre></td></tr></table></figure>
<p>两台路由器都对应配置（IP写对）</p>
</li>
<li>
<p>可以先测试一下，两台PC机应该是无法通信的，</p>
<p>虽然路由器已经工作了，但是只知道自己两个端口的路由，并不知道非直连的路由，所以是无法通信的。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809185954270.png" alt="image-20230809185954270" style="zoom:67%;" /> 
</li>
</ul>
<h4 id="配置路由">配置路由</h4>
<ul>
<li>
<p>我们现在来把那个非直连路由，配置为静态路由，使其可以通信。</p>
<p>将去往非直连网段的路由配置下一跳为对方路由器的直连接口IP</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">路由器0</span><br><span class="line">Router(config)#ip route 192.168.2.0 255.255.255.0 192.168.3.2</span><br><span class="line">可以查看</span><br><span class="line">Router#show ip route</span><br><span class="line">有下面的内容即可</span><br><span class="line">C    192.168.1.0/24 is directly connected, FastEthernet0/0</span><br><span class="line">S    192.168.2.0/24 [1/0] via 192.168.3.2</span><br><span class="line">C    192.168.3.0/24 is directly connected, Serial2/0</span><br><span class="line"></span><br><span class="line">路由器1</span><br><span class="line">Router(config)#ip route 192.168.1.0 255.255.255.0 192.168.3.1</span><br><span class="line">可以查看</span><br><span class="line">Router#show ip route</span><br><span class="line">有下面的内容即可</span><br><span class="line">S    192.168.1.0/24 [1/0] via 192.168.3.1</span><br><span class="line">C    192.168.2.0/24 is directly connected, FastEthernet0/0</span><br><span class="line">C    192.168.3.0/24 is directly connected, Serial2/0</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="9-3-测试">9.3 测试</h3>
<ul>
<li>
<p>之前测试ping并不能通信，现在重新ping，能正常通信</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230809190610900.png" alt="image-20230809190610900" style="zoom:67%;" /> 
</li>
</ul>
<h2 id="第十章、路由器RIP动态路由">第十章、路由器RIP动态路由</h2>
<h3 id="10-1-原理">10.1 原理</h3>
<ul>
<li>
<p><strong>路由协议分类</strong></p>
<ul>
<li>
<p>内部网关协议 IGP</p>
<p>RIP、EIGRP（距离矢量路由协议）</p>
<p>OSPF、IS-IS（链路状态路由协议）</p>
</li>
<li>
<p>外部网关协议 EGP</p>
<p>BGP</p>
</li>
</ul>
</li>
<li>
<p><strong>RIP协议</strong><br>
RIP是Routing Information Protocol（路由信息）的简称，它是一种较为简单的内部网关路由协议（Interior Gateay Protocol），是内部网关协议IGP中最先得到广泛使用的协议。RIP是基于距离矢量的路由选择协议，是因特网标准协议，其最大优点就是实现简单，开销较小，适用于网络拓扑较小的环境。</p>
<ul>
<li>
<p>具体原理</p>
<p>RIP是一种基于距离矢量（Distance-Vector）算法的协议，每30秒 会与相邻的路由器交换路由信息，以动态建立路由表。<br>
它使用跳数（Hop Count）作为度量值来衡量达到目的的地址的距离（最大跳数15跳）。设备到与它直连网络的设备跳数为0，然后每经过一 个三层设备跳数增加1。也就是说通过一个3层设备到达的网络的跳数 为1。度量值等于从本网络到达目的网络间的设备数据量。为限制收敛 时间，RIP规定度量值取1~15之间的整数，大于或等于16的跳数（也 就是3层设备数量）被定义为无穷大，即目的网络或主机不可达。也就 是说最大跳数15跳所以流量只能经过15个3层设备，16跳第16个3 层设备为不可达。</p>
</li>
<li>
<p>版本</p>
<p>RIP包含RIP-v1、RIP-v2、RIPng三个版本，RIP-2对RIP-1进行了扩充，使其更具有优势，RIP-1和IPR-2应用在IPV4环境中，RIPng 则应用在IPV6环境中。</p>
<p>RIPv1是有类路由协议，RIPv2是无类路由协议，即RIPv2的报文中含有掩码信息。</p>
</li>
<li>
<p>优点</p>
<p>配置实现简单、开销较小、问题定位快、适用于网络规模小的环境。</p>
</li>
<li>
<p>缺点</p>
<p>本身的度量值限制了网络规模、交换完整的路由信息随着网络规模的扩大开销也叫增加了、坏消息传播的慢使更新过程收敛时间较长。</p>
</li>
</ul>
</li>
<li>
<p><strong>路由表标志</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">R：表示RIP路由协议</span><br><span class="line">C：直连网段路由</span><br><span class="line">S：静态路由</span><br><span class="line">B：BGP路由协议</span><br><span class="line">D：EIGRP路由协议</span><br><span class="line">O：OSPF</span><br><span class="line">N1：为OSPF的宣告类型1</span><br><span class="line">N2：为OSPF的宣告类型2</span><br><span class="line">E1：为OSPF的内部路由</span><br><span class="line">E2：为OSPF的外部路由</span><br><span class="line">i：为IS-IS路由协议</span><br><span class="line">L1：为IS-IS的类型1路由协议</span><br></pre></td></tr></table></figure>
<p>例：C 192.168.4.0/24 is directly connected, FastEthernet3/0<br>
该字段中的C表示直连网段，192.168.4.0/24表示目标网段，FastEthernet3/0表示下一跳接口。<br>
例：R 192.168.1.0/24 [120/3] via 192.168.4.1, 00:00:02,FastEthernet3/0<br>
该字段中R表示使用的是RIP路由协议，192.168.1.0/24表示达到 的目标网段，120表示为RIP协议的优先级，3达到目标网络的跳数（也就是需要经过3个路由器），FastEthernet3/0表示下一跳接口地址。</p>
</li>
</ul>
<h3 id="10-2-实验">10.2 实验</h3>
<h4 id="搭建拓扑-2">搭建拓扑</h4>
<ul>
<li>PC机两台</li>
<li>三层交换机3560 一台</li>
<li>路由器Router-PT 两台</li>
<li>直连线连接PC机、交换机</li>
<li>交叉线连接交换机、路由器</li>
<li>交叉线连接主机、交换机</li>
<li>串口线连接路由器、路由器</li>
</ul>
<blockquote>
<ul>
<li>
<p>主机与交换机之间、交换机与交换机之间的连接用直连线Copper Straight-Through</p>
<p>（二层交换机、三层交换机均属于交换机）</p>
</li>
<li>
<p>主机或交换机连接到 路由器 时，采用交叉线Copper Cross-Over</p>
</li>
<li>
<p>路由器之间的连接，采用串口线Serial DCE</p>
</li>
</ul>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810023500985.png" alt="image-20230810023500985" style="zoom:67%;" /> 
<h4 id="配置IP、路由">配置IP、路由</h4>
<ul>
<li>按照图示配置PC机IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810015207538.png" alt="image-20230810015207538" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810015233238.png" alt="image-20230810015233238" style="zoom:67%;" /></p>
<ul>
<li>
<p>三层交换机</p>
<p>（1）开启路由功能；创建vlan，划分端口进vlan，配置vlan的IP，开启；</p>
<p>（2）开启RIP协议，写入直连网段，版本为2，开启；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">（1）配置IP信息</span><br><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#ip routing</span><br><span class="line">Switch(config)#vlan 10</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 20</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport access vlan 10</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 20</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 10</span><br><span class="line">Switch(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 20</span><br><span class="line">Switch(config-if)#ip address 192.168.2.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show running-config </span><br><span class="line">可以看到以下内容</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/1</span><br><span class="line"> switchport access vlan 10</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/2</span><br><span class="line"> switchport access vlan 20</span><br><span class="line">!</span><br><span class="line">...</span><br><span class="line">!</span><br><span class="line">interface Vlan1</span><br><span class="line"> no ip address</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface Vlan10</span><br><span class="line"> mac-address 0003.e414.5101</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line">interface Vlan20</span><br><span class="line"> mac-address 0003.e414.5102</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">（2）配置RIP协议</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#router rip</span><br><span class="line">Switch(config-router)#network 192.168.1.0</span><br><span class="line">Switch(config-router)#network 192.168.2.0</span><br><span class="line">Switch(config-router)#version 2</span><br><span class="line">Switch(config-router)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show running-config </span><br><span class="line">看到以下内容</span><br><span class="line">!</span><br><span class="line">router rip</span><br><span class="line"> version 2</span><br><span class="line"> network 192.168.1.0</span><br><span class="line"> network 192.168.2.0</span><br><span class="line">!</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>路由器</p>
<p>开启fa端口，配置IP；</p>
<p>开启se端口，配置IP，配置时钟64000；</p>
<p>开启RIP协议，配置直连网段，版本为2；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">（1）配置端口IP信息</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#ip address 192.168.2.2 255.255.255.0</span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#ip address 192.168.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line"></span><br><span class="line">（2）配置RIP协议</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#router rip</span><br><span class="line">Router(config-router)#version 2</span><br><span class="line">Router(config-router)#network 192.168.2.0</span><br><span class="line">Router(config-router)#network 192.168.3.0</span><br><span class="line">Router(config-router)#end</span><br><span class="line"></span><br><span class="line">查看配置信息</span><br><span class="line">Router#show running-config </span><br><span class="line">有以下内容即可</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.2.2 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">interface FastEthernet1/0</span><br><span class="line"> no ip address</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.1 255.255.255.0</span><br><span class="line"> clock rate 64000</span><br><span class="line">!</span><br><span class="line">interface Serial3/0</span><br><span class="line"> no ip address</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface FastEthernet4/0</span><br><span class="line"> no ip address</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface FastEthernet5/0</span><br><span class="line"> no ip address</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">router rip</span><br><span class="line"> version 2</span><br><span class="line"> network 192.168.2.0</span><br><span class="line"> network 192.168.3.0</span><br><span class="line">!</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>另一台路由器类似配置</p>
</li>
</ul>
<h3 id="10-3-测试">10.3 测试</h3>
<ul>
<li>
<p>从PC0去ping PC1，能通。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810023355251.png" alt="image-20230810023355251" style="zoom:67%;" /> 
</li>
</ul>
<h2 id="第十一章、路由器OSPF动态路由">第十一章、路由器OSPF动态路由</h2>
<h3 id="11-1-原理">11.1 原理</h3>
<blockquote>
<p>详细说明：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1vT411W7pC/">快速带你了解OSPF协议！</a></p>
</blockquote>
<ul>
<li>
<p>OSPF（Open Shortest Path First，开放最短路径优先）</p>
<p>是IETF（Internet Engineering Task Force，互联网工程任务组）组织开发的一个基于链路状态的内部网关协议。目前针对IPv4协议使用的是OSPF Version 2。下文中所提到的OSPF均指OSPF Version 2。</p>
</li>
<li>
<p>工作过程</p>
<p>由邻居信息构建网络拓扑图</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">R1邻居：R2 R4</span><br><span class="line">R2邻居：R1 R3</span><br><span class="line">R3邻居：R2 R4</span><br><span class="line">R4邻居：R1 R3</span><br></pre></td></tr></table></figure>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810130755714.png" alt="image-20230810130755714" style="zoom:50%;" /> 
<p>通过拓扑图计算开销</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810130936466.png" alt="image-20230810130936466" style="zoom: 50%;" /> 
</li>
<li>
<p>工作进程</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810130549810.png" alt="image-20230810130549810" style="zoom: 33%;" /> 
</li>
</ul>
<h3 id="11-2-实验">11.2 实验</h3>
<h4 id="搭建拓扑-3">搭建拓扑</h4>
<ul>
<li>PC机 两台</li>
<li>三层交换机3560 一台</li>
<li>路由器Router-PT 两台</li>
<li>按要求连线</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810140927339.png" alt="image-20230810140927339" style="zoom:67%;" /> 
<h4 id="配置IP、路由-2">配置IP、路由</h4>
<ul>
<li>PC机配置IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810134049540.png" alt="image-20230810134049540" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810134116402.png" alt="image-20230810134116402" style="zoom:67%;" /></p>
<ul>
<li>
<p>三层交换机配置</p>
<p>创建vlan，划分vlan，配置vlan的IP，开启；</p>
<p><strong>开启路由模块</strong>，配置ospf 协议，写入直连网段（网段、反掩码、区域）；</p>
<blockquote>
<p>记住！三层交换机，再配置ospf 功能前，必须先开启路由模块<code>ip routing</code>！！</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">（1）配置vlan和IP</span><br><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#vlan 10</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#vlan 20</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport access vlan 10</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 20</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 10</span><br><span class="line">Switch(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 20</span><br><span class="line">Switch(config-if)#ip address 192.168.2.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置</span><br><span class="line">Switch#show running-config </span><br><span class="line">看到以下内容即为正确</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/1</span><br><span class="line"> switchport access vlan 10</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/2</span><br><span class="line"> switchport access vlan 20</span><br><span class="line">!</span><br><span class="line">...</span><br><span class="line">!</span><br><span class="line">interface Vlan1</span><br><span class="line"> no ip address</span><br><span class="line"> shutdown</span><br><span class="line">!</span><br><span class="line">interface Vlan10</span><br><span class="line"> mac-address 0001.6347.2d01</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line">interface Vlan20</span><br><span class="line"> mac-address 0001.6347.2d02</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">（2）配置ospf 协议</span><br><span class="line">Switch#conf t</span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line">Switch(config)#ip routing		注意这里！！！先开启路由模块！</span><br><span class="line">Switch(config)#router ospf 1	这里的1意思是本地进程号是1</span><br><span class="line">Switch(config-router)#network 192.168.1.0 0.0.0.255 area 0</span><br><span class="line">Switch(config-router)#network 192.168.2.0 0.0.0.255 area 0</span><br><span class="line">Switch(config-router)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show ip protocols </span><br><span class="line">有以下内容即可</span><br><span class="line">Routing Protocol is &quot;ospf 1&quot;</span><br><span class="line">  Outgoing update filter list for all interfaces is not set </span><br><span class="line">  Incoming update filter list for all interfaces is not set </span><br><span class="line">  Router ID 192.168.2.1</span><br><span class="line">  Number of areas in this router is 1. 1 normal 0 stub 0 nssa</span><br><span class="line">  Maximum path: 4</span><br><span class="line">  Routing for Networks:</span><br><span class="line">    192.168.1.0 0.0.0.255 area 0</span><br><span class="line">    192.168.2.0 0.0.0.255 area 0</span><br><span class="line">  Routing Information Sources:  </span><br><span class="line">    Gateway         Distance      Last Update </span><br><span class="line">    192.168.2.1          110      00:00:42</span><br><span class="line">  Distance: (default is 110)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>路由器</p>
<p>配置端口IP，开启；</p>
<p>开启ospf 协议，写入直连网段（网段、反掩码、区域）；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">（1）配置端口IP</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.2.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 192.168.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置</span><br><span class="line">Router#show run</span><br><span class="line">看到以下内容即可</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.2.2 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.1 255.255.255.0</span><br><span class="line"> clock rate 64000</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">（2）配置ospf 协议</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#router ospf 1</span><br><span class="line">Router(config-router)#network 192.168.2.0 0.0.0.255 area 0</span><br><span class="line">Router(config-router)#network 192.168.3.0 0.0.0.255 area 0</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Router#show ip protocols </span><br><span class="line">看到以下内容即可</span><br><span class="line">Routing Protocol is &quot;ospf 1&quot;</span><br><span class="line">  Outgoing update filter list for all interfaces is not set </span><br><span class="line">  Incoming update filter list for all interfaces is not set </span><br><span class="line">  Router ID 192.168.3.1</span><br><span class="line">  Number of areas in this router is 1. 1 normal 0 stub 0 nssa</span><br><span class="line">  Maximum path: 4</span><br><span class="line">  Routing for Networks:</span><br><span class="line">    192.168.2.0 0.0.0.255 area 0</span><br><span class="line">    192.168.3.0 0.0.0.255 area 0</span><br><span class="line">  Routing Information Sources:  </span><br><span class="line">    Gateway         Distance      Last Update </span><br><span class="line">    192.168.2.1          110      00:00:23</span><br><span class="line">    192.168.3.1          110      00:00:23</span><br><span class="line">  Distance: (default is 110)</span><br></pre></td></tr></table></figure>
<p>路由台路由器一样操作（不用设置时钟频率，因为不是DCE端）</p>
</li>
</ul>
<h3 id="11-3-测试">11.3 测试</h3>
<ul>
<li>
<p>全部都设置好之后，打开最后一个路由器，查看路由表，会是如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Router#show ip route</span><br><span class="line">Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP</span><br><span class="line">       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area</span><br><span class="line">       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2</span><br><span class="line">       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP</span><br><span class="line">       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area</span><br><span class="line">       * - candidate default, U - per-user static route, o - ODR</span><br><span class="line">       P - periodic downloaded static route</span><br><span class="line"></span><br><span class="line">Gateway of last resort is not set</span><br><span class="line"></span><br><span class="line">O    192.168.1.0/24 [110/66] via 192.168.3.1, 00:00:14, Serial2/0</span><br><span class="line">O    192.168.2.0/24 [110/65] via 192.168.3.1, 00:00:14, Serial2/0</span><br><span class="line">C    192.168.3.0/24 is directly connected, Serial2/0</span><br><span class="line">C    192.168.4.0/24 is directly connected, FastEthernet0/0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>通过PC机ping，发现能互通</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810140830075.png" alt="image-20230810140830075" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810140854624.png" alt="image-20230810140854624" style="zoom:67%;" /></p>
</li>
</ul>
<h2 id="第十二章、路由器综合路由">第十二章、路由器综合路由</h2>
<h3 id="12-1-原理">12.1 原理</h3>
<ul>
<li>
<p>路由重分布</p>
<p>为了在同一个网络中有效地支持多种路由协议，必须在不同的路由协议之间共享路由信息。在不同的路由协议之间交换路由信息的过程称为路由重分布，它将一种路由选择协议获悉的路由信息告知给另一种路由选择协议。</p>
<p>路由重分布为在同一个互连网络中高效地支持多种路由协议提供了可能，执行路由重分布的路由器被称为边界路由器，因为它们位于两个或多个自治系统的边界上。</p>
<ul>
<li>考虑的问题：
<ol>
<li>路由反馈：双向重分布有可能把从一个自治系统学到的路由信息发送回该自治系统。</li>
<li>路由信息的兼容：不同路由协议的度量标准是不同的</li>
<li>收敛时间不一致</li>
</ol>
</li>
</ul>
</li>
<li>
<p>协议</p>
<ul>
<li>内部路由器：RIPv2协议</li>
<li>连接处路由器：一边RIPv2协议，一边OSPF协议，进行路由重分布</li>
<li>外部路由器：OSPF协议</li>
</ul>
</li>
<li>
<p>备注</p>
<ul>
<li>
<p>本身协议的开启，是软件实现的。</p>
<p>因此，开启的是什么协议，取决于你把这个网段写成了哪个协议里的直连网段。</p>
</li>
<li>
<p>同一个路由器可以同时开启多种协议。</p>
<p>进行路由重分布，就是进入一种协议后，把另一种协议的路由表重分布进来即可。</p>
</li>
</ul>
</li>
</ul>
<h3 id="12-2-实验">12.2 实验</h3>
<h4 id="搭建拓扑-4">搭建拓扑</h4>
<ul>
<li>PC机 两台</li>
<li>三层交换机3560 一台</li>
<li>路由器Router-PT 两台</li>
<li>连线</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161744306.png" alt="image-20230810161744306" style="zoom:67%;" /> 
<blockquote>
<p>说明一下：我们这里，是</p>
<ul>
<li>左侧作为内部，采用RIP协议</li>
<li>右侧作为外部，采用OSPF协议</li>
<li>以中间的R0作为分界线，R0同时配置RIP、OSPF协议，并进行路由重分布。</li>
</ul>
</blockquote>
<h4 id="配置IP、路由-3">配置IP、路由</h4>
<ul>
<li>PC机配置IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810151256124.png" alt="image-20230810151256124" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810151326849.png" alt="image-20230810151326849" style="zoom:67%;" /></p>
<ul>
<li>
<p>三层交换机</p>
<p>创建vlan，划分vlan端口，配置vlan的IP，开启；</p>
<p>开启路由模块，采用RIP协议，版本号2，写入直连网段；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">（1）配置vlan的IP并开启</span><br><span class="line">Switch&gt;en</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#vlan 2</span><br><span class="line">Switch(config-vlan)#exit</span><br><span class="line">Switch(config)#int fa 0/1</span><br><span class="line">Switch(config-if)#switchport access vlan 1</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int fa 0/2</span><br><span class="line">Switch(config-if)#switchport access vlan 2</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 1</span><br><span class="line">Switch(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown</span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#int vlan 2</span><br><span class="line">Switch(config-if)#ip address 192.168.2.1 255.255.255.0</span><br><span class="line">Switch(config-if)#no shutdown </span><br><span class="line">Switch(config-if)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show running-config </span><br><span class="line">看到以下内容即可</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/1</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/2</span><br><span class="line"> switchport access vlan 2</span><br><span class="line">!</span><br><span class="line">...</span><br><span class="line">!</span><br><span class="line">interface Vlan1</span><br><span class="line"> ip address 192.168.1.1 255.255.255.0</span><br><span class="line">!</span><br><span class="line">interface Vlan2</span><br><span class="line"> mac-address 0090.2b3a.7a01</span><br><span class="line"> ip address 192.168.2.1 255.255.255.0</span><br><span class="line"> </span><br><span class="line">（2）路由模块，RIP协议配置</span><br><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#ip routing</span><br><span class="line">Switch(config)#router rip</span><br><span class="line">Switch(config-router)#version 2</span><br><span class="line">Switch(config-router)#network 192.168.1.0</span><br><span class="line">Switch(config-router)#network 192.168.2.0</span><br><span class="line">Switch(config-router)#exit</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show ip protocols </span><br><span class="line">看到以下内容即可</span><br><span class="line">Routing Protocol is &quot;rip&quot;</span><br><span class="line">...</span><br><span class="line">Routing for Networks:</span><br><span class="line">	192.168.1.0</span><br><span class="line">	192.168.2.0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>路由器R0（中间的路由器）</p>
<p>配置端口IP，开启（注意se有时钟频率设置）；</p>
<p>运行RIP协议，写入左边的网段<code>192.168.2.0</code>；</p>
<p>运行OSPF协议，写入右边的网段<code>192.168.3.0</code>；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">（1）配置端口IP并开启</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.2.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 192.168.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Router#show run</span><br><span class="line">看到以下内容即可</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.2.2 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">...</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.1 255.255.255.0</span><br><span class="line"> clock rate 64000</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">（2）运行RIP协议</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#router rip</span><br><span class="line">Router(config-router)#version 2</span><br><span class="line">Router(config-router)#network 192.168.2.0</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#router ospf 1</span><br><span class="line">Router(config-router)#network 192.168.3.0 0.0.0.255 area 0</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Router#show ip protocols </span><br><span class="line">看到以下内容即可</span><br><span class="line">Routing Protocol is &quot;rip&quot;</span><br><span class="line">...</span><br><span class="line">Routing for Networks:</span><br><span class="line">	192.168.2.0</span><br><span class="line">...</span><br><span class="line">Routing Protocol is &quot;ospf 1&quot;</span><br><span class="line">...</span><br><span class="line">  Routing for Networks:</span><br><span class="line">    192.168.3.0 0.0.0.255 area 0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>路由器R1（右边的）</p>
<p>配置端口IP，开启；</p>
<p>运行OSPF协议；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">（1）配置端口IP并开启</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 192.168.3.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.4.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Router#show run</span><br><span class="line">看到以下内容即可</span><br><span class="line">!</span><br><span class="line">interface FastEthernet0/0</span><br><span class="line"> ip address 192.168.4.1 255.255.255.0</span><br><span class="line"> duplex auto</span><br><span class="line"> speed auto</span><br><span class="line">!</span><br><span class="line">...</span><br><span class="line">!</span><br><span class="line">interface Serial2/0</span><br><span class="line"> ip address 192.168.3.2 255.255.255.0</span><br><span class="line">!</span><br><span class="line"></span><br><span class="line">（2）运行OSPF协议</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#router ospf 1</span><br><span class="line">Router(config-router)#network 192.168.3.0 0.0.0.255 area 0</span><br><span class="line">Router(config-router)#network 192.168.4.0 0.0.0.255 area 0</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Router#show ip protocols </span><br><span class="line">看到以下内容即可</span><br><span class="line">Routing Protocol is &quot;ospf 1&quot;</span><br><span class="line">...</span><br><span class="line">  Routing for Networks:</span><br><span class="line">    192.168.3.0 0.0.0.255 area 0</span><br><span class="line">    192.168.4.0 0.0.0.255 area 0</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>现在先测试一下，从PC0去ping PC1，发现并不能通信。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810154513709.png" alt="image-20230810154513709" style="zoom:67%;" /> 
<p>打开各个路由器或三层交换机，查看路由表，</p>
<p>你会发现，左右两边的路由器并没有全部网段的路由，只有中间的路由器拥有完全的路由表，</p>
<p>但实际上中间的路由表的路由是两个分立的路由表共同显示的，并不会完全把路由信息对邻居路由器通告，</p>
<ul>
<li>标志C：直连网段；</li>
<li>标志O：OSPF协议；</li>
<li>标志R：RIP协议。</li>
</ul>
<p>因此无法通信是正常的。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810154614447.png" alt="image-20230810154614447" style="zoom: 43%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810154552549.png" alt="image-20230810154552549" style="zoom: 43%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810154636419.png" alt="image-20230810154636419" style="zoom: 43%;" /></p>
<p>所以接下来我们对中间的路由器进行路由重分布设置。</p>
</li>
<li>
<p>路由器R0</p>
<p>进入RIP协议，把OSPF路由表进行路由重分布加入；</p>
<p>进入OSPF协议，把RIP路由表进行路由重分布加入；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Router#conf t</span><br><span class="line">Router(config)#router rip</span><br><span class="line">Router(config-router)#redistribute ospf 1</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#router ospf 1</span><br><span class="line">Router(config-router)#redistribute rip subnets 		这里写subnets意思是把具体子网也加入进来</span><br><span class="line">Router(config-router)#exit</span><br><span class="line">Router(config)#end</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>三层交换机 静态路由</p>
<p>到这里，有些人可能已经可以了，但是有些人还不能。（因为一些设备会自动设置静态路由）</p>
<p>可能是版本问题，不能的人，可以手动设置一下静态路由，</p>
<p>使得三层交换机的默认下一跳（没有下一跳就会走默认）为R0连接处的IP（即默认走向R0来处理）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Switch#conf t</span><br><span class="line">Switch(config)#ip route 0.0.0.0 0.0.0.0 192.168.2.2</span><br><span class="line">Switch(config)#end</span><br><span class="line">查看配置信息</span><br><span class="line">Switch#show ip route</span><br><span class="line">看到下面的内容即可（主要是看到有S*这一行，这就是静态路由）</span><br><span class="line">C    192.168.1.0/24 is directly connected, Vlan1</span><br><span class="line">C    192.168.2.0/24 is directly connected, Vlan2</span><br><span class="line">S*   0.0.0.0/0 [1/0] via 192.168.2.2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="12-3-测试">12.3 测试</h3>
<ul>
<li>
<p>前面，我们测试了PC机之间是无法正常通信的，</p>
<p>这里，我们再次测试，发现可以正常通信了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161049622.png" alt="image-20230810161049622" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161633727.png" alt="image-20230810161633727" style="zoom:67%;" /></p>
</li>
<li>
<p>我们也再次打开三个路由器或三层交换机的路由表看看，发现</p>
<ul>
<li>三层交换机有静态路由</li>
<li>路由器R0有四个网段路由</li>
<li>路由器R1也有四个网段路由</li>
</ul>
<p>因此可以实现正常通信。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161235069.png" alt="image-20230810161235069" style="zoom:43%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161214324.png" alt="image-20230810161214324" style="zoom:43%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230810161257774.png" alt="image-20230810161257774" style="zoom:43%;" /></p>
<h2 id="第十三章、标准IP访问控制列表">第十三章、标准IP访问控制列表</h2>
<blockquote>
<p>详细资料：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45409371/article/details/102523107">访问控制列表ACL ------标准IP访问列表 （理论+实验）</a></p>
</blockquote>
<h3 id="13-1-原理">13.1 原理</h3>
<ul>
<li>
<p>访问控制列表（Access Control Lists，ACL）</p>
<p>俗称“防火墙”。是应用在路由器接口的指令列表，这些指令列表用来告诉路由器哪些数据包可以接收、哪些数据包需要拒绝。访问控制是网络安全防范和保护的主要策略，它的主要任务是保证网络资源不被非法使用和访问。它是保证网络安全最重要的核心策略之一。访问控制涉及的技术也比较广，包括入网访问控制、网络权限控制、目录级控制以及属性控制等多种手段。</p>
</li>
<li>
<p>功能</p>
<ul>
<li>限制网络流量、提高网络性能。例如，ACL可以根据数据包的协议，指定这种类型的数据包具有更高的优先级，同等情况下可预先被网络设备处理。</li>
<li>提供对通信流量的控制手段。</li>
<li>提供网络访问的基本安全手段。</li>
<li>在网络设备接口处，决定哪种类型的通信流量被转发、哪种类型的通信流量被阻塞。</li>
</ul>
</li>
<li>
<p>分类</p>
<ul>
<li>
<p>标准IP访问列表</p>
<p>编号范围：1 - 99，也可以命名</p>
<p>一个标准IP访问控制列表匹配IP包中的<strong>源地址</strong>或源地址中的一部分，可对匹配的包采取拒绝或允许两个操作。</p>
</li>
<li>
<p>扩展IP访问列表</p>
<p>编号范围：100 - 199，也可以命名</p>
<p>扩展IP访问控制列表比标准IP访问控制列表具有更多的匹配项，包括<strong>协议类型、源地址、目的地址、源端口、目的端口、建立连接的和IP优先级</strong>等。</p>
</li>
</ul>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811140522042.png" alt="image-20230811140522042" style="zoom:67%;" />
<ul>
<li>
<p>ACL的放置规则<br>
每一个路由器接口的每一个方向，每一种协议只能创建一个ACL；在适当的位置放置 ACL 可以过滤掉不必要的流量，使网络更加高效。ACL 可以充当防火墙来过滤数据包并去除不必要的流量。ACL 的放置位置决定了是否能有效减少不必要的流量。例如，会被远程目的地拒绝的流量不应该消耗通往该目的地的路径上的网络资源。每个 ACL 都应该放置在最能发挥作用的位置。</p>
<p><strong>基本的规则</strong></p>
<ul>
<li>
<p>因为标准 ACL 不会指定目的地址，所以其位置应该尽可能靠近目的地。</p>
</li>
<li>
<p>将扩展 ACL 尽可能靠近要拒绝流量的源。这样，才能在不需要的流量流经网络之前将其过滤掉。</p>
</li>
<li>
<p>出：已经过路由器的处理，正离开路由器接口的数据包</p>
</li>
<li>
<p>入：已到达路由器接口的数据包，将被路由器处理</p>
</li>
</ul>
</li>
<li>
<p>使用方法</p>
<ul>
<li>配置规则</li>
<li>应用到端口上</li>
</ul>
</li>
<li>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ip access-list standard 1		这里1的意思是编号，可以为1-99</span><br><span class="line">permit 172.16.1.0 0.0.0.255 	注意要用反掩码</span><br><span class="line">deny 172.16.2.0 0.0.0.255</span><br><span class="line"></span><br><span class="line">int fa 0/0</span><br><span class="line">ip access-group 1 out</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="13-2-实验">13.2 实验</h3>
<h4 id="搭建拓扑-5">搭建拓扑</h4>
<ul>
<li>PC机 三台</li>
<li>路由器Router-PT两台</li>
<li>连线</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811152052906.png" alt="image-20230811152052906" style="zoom:67%;" /> 
<h4 id="配置IP-2">配置IP</h4>
<ul>
<li>PC机配置IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811142124219.png" alt="image-20230811142124219" style="zoom: 50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811142145167.png" alt="image-20230811142145167" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811142220279.png" alt="image-20230811142220279" style="zoom:50%;" /></p>
<ul>
<li>
<p>路由器配置 IP</p>
<p>R0配置端口IP，开启（记得配置时钟频率）；</p>
<p>R1配置端口IP，开启；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">（1）R0配置</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 172.16.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int fa 1/0</span><br><span class="line">Router(config-if)#ip address 172.16.2.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 172.16.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#end</span><br><span class="line"></span><br><span class="line">（2）R1配置</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 172.16.3.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config-if)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 172.16.4.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="配置路由-2">配置路由</h4>
<ul>
<li>
<p>路由器路由配置</p>
<p>目前只有直连路由，因此，</p>
<ul>
<li>
<p>R0 知道去往 1.0、2.0、3.0 网段的路由，但是并不知道 4.0 网段的路由；</p>
</li>
<li>
<p>R1 知道去往 3.0、4.0 网段的路由，但是并不知道 1.0、2.0 网段的路由。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811145552561.png" alt="image-20230811145552561" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811145610051.png" alt="image-20230811145610051" style="zoom:67%;" /></p>
<p>因此，可以</p>
<ul>
<li>R0 配置 静态路由 去往 4.0 网段</li>
<li>R1 配置 默认路由 去往 1.0、2.0 网段</li>
</ul>
<blockquote>
<p>默认路由是一种特殊的静态路由</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">（1）R0配置静态路由</span><br><span class="line">Router(config)#ip route 172.16.4.0 255.255.255.0 172.16.3.2</span><br><span class="line">（2）R1配置默认路由</span><br><span class="line">Router(config)#ip route 0.0.0.0 0.0.0.0 172.16.3.1</span><br></pre></td></tr></table></figure>
<p>再次查看路由情况，如下：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811145759157.png" alt="image-20230811145759157" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811145811919.png" alt="image-20230811145811919" style="zoom:67%;" /></p>
</li>
<li>
<p>现在可以先测试一下，所有的PC机现在都能ping通了</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811145949050.png" alt="image-20230811145949050" style="zoom: 50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811150045099.png" alt="image-20230811150045099" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811150119258.png" alt="image-20230811150119258" style="zoom:50%;" /></p>
<h4 id="配置标准ACL">配置标准ACL</h4>
<ul>
<li>
<p>我们要禁止销售部访问财务部，其他均可</p>
<p>所以，可以在路由器R1上设置（R0也可以，但是尽量靠近目的地址更好）。</p>
</li>
<li>
<p>路由器R1配置标准ACL</p>
<p>创建一个标准ACL；</p>
<p>进入端口，应用在端口的出out /入in ；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Router#conf t</span><br><span class="line">Router(config)#ip access-list standard 1		这里1的意思是编号，可以为1-99</span><br><span class="line">Router(config-std-nacl)#permit 172.16.1.0 0.0.0.255 	注意要用反掩码</span><br><span class="line">Router(config-std-nacl)#deny 172.16.2.0 0.0.0.255</span><br><span class="line">Router(config-std-nacl)#exit</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip access-group 1 out			这里即：进入端口后，把编号1的ACL应用在该端口的出口上</span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="13-3-测试">13.3 测试</h3>
<ul>
<li>
<p>之前测试，是全部都能互相ping通的，</p>
<p>现在测试，发现只有销售部无法ping通财务部（反过来也不可以）。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811151316918.png" alt="image-20230811151316918" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811151340891.png" alt="image-20230811151340891" style="zoom:50%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811151500559.png" alt="image-20230811151500559" style="zoom:50%;" /></p>
<blockquote>
<p>但是两者出现的情况是不一样的，</p>
<ul>
<li>
<p>销售部 ping 财务部</p>
<p><code>Reply from 172.16.3.2: Destination host unreachable.</code></p>
<p>无法抵达。这是明确被中间的路由器172.168.3.2告知了无法到达财务部的。</p>
<p>因为是这个路由器进行的ACL拦截，会回复这个拦截停通知。</p>
</li>
<li>
<p>财务部 ping 销售部</p>
<p><code>Request timed out.</code></p>
<p>请求超时。这是没有被告知中间出了什么问题的。</p>
<p>因为财务部实际上确实把包发出去了，也没有人拦截，但是，销售部回复的包被拦截了。而这种情况下，销售部会收到无法抵达的通知，财务部这边看来就是什么都没有，不知道发生了什么，仍然一直等待，所以，请求超时。</p>
</li>
</ul>
</blockquote>
<h2 id="第十四章、扩展IP访问控制列表">第十四章、扩展IP访问控制列表</h2>
<h3 id="14-1-原理">14.1 原理</h3>
<ul>
<li>
<p>原理</p>
<p>见标准ACL</p>
</li>
<li>
<p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">【具体命令】</span><br><span class="line">access-list 访问控制列表号 &#123;deny/permit&#125; 协议类型 源网络地址 [通配符掩码(反掩码)] 目的网络地址 [通配符掩码] [运算符 端口号]</span><br><span class="line"></span><br><span class="line">【选项查看】</span><br><span class="line">Router(config)#access-list ?</span><br><span class="line">  &lt;1-99&gt;     IP standard access list</span><br><span class="line">  &lt;100-199&gt;  IP extended access list</span><br><span class="line">Router(config)#access-list 100 ?</span><br><span class="line">  deny    Specify packets to reject</span><br><span class="line">  permit  Specify packets to forward</span><br><span class="line">  remark  Access list entry comment</span><br><span class="line">Router(config)#access-list 100 permit ?</span><br><span class="line">  ahp    Authentication Header Protocol</span><br><span class="line">  eigrp  Cisco&#x27;s EIGRP routing protocol</span><br><span class="line">  esp    Encapsulation Security Payload</span><br><span class="line">  gre    Cisco&#x27;s GRE tunneling</span><br><span class="line">  icmp   Internet Control Message Protocol</span><br><span class="line">  ip     Any Internet Protocol</span><br><span class="line">  ospf   OSPF routing protocol</span><br><span class="line">  tcp    Transmission Control Protocol</span><br><span class="line">  udp    User Datagram Protocol</span><br><span class="line">Router(config)#access-list 100 permit tcp ?</span><br><span class="line">  A.B.C.D  Source address</span><br><span class="line">  any      Any source host</span><br><span class="line">  host     A single source host</span><br><span class="line">Router(config)#access-list 100 permit tcp any ?</span><br><span class="line">  A.B.C.D  Destination address</span><br><span class="line">  any      Any destination host</span><br><span class="line">  eq       Match only packets on a given port number</span><br><span class="line">  gt       Match only packets with a greater port number</span><br><span class="line">  host     A single destination host</span><br><span class="line">  lt       Match only packets with a lower port number</span><br><span class="line">  neq      Match only packets not on a given port number</span><br><span class="line">  range    Match only packets in the range of port numbers</span><br><span class="line">Router(config)#access-list 100 permit tcp any host ?</span><br><span class="line">  A.B.C.D  Destination address</span><br><span class="line">Router(config)#access-list 100 permit tcp any host 172.16.4.2 ?</span><br><span class="line">  dscp         Match packets with given dscp value</span><br><span class="line">  eq           Match only packets on a given port number</span><br><span class="line">  established  established</span><br><span class="line">  gt           Match only packets with a greater port number</span><br><span class="line">  lt           Match only packets with a lower port number</span><br><span class="line">  neq          Match only packets not on a given port number</span><br><span class="line">  precedence   Match packets with given precedence value</span><br><span class="line">  range        Match only packets in the range of port numbers</span><br><span class="line">  &lt;cr&gt;</span><br><span class="line">Router(config)#access-list 100 permit tcp any host 172.16.4.2 eq ?</span><br><span class="line">  &lt;0-65535&gt;  Port number</span><br><span class="line">  ftp        File Transfer Protocol (21)</span><br><span class="line">  pop3       Post Office Protocol v3 (110)</span><br><span class="line">  smtp       Simple Mail Transport Protocol (25)</span><br><span class="line">  telnet     Telnet (23)</span><br><span class="line">  www        World Wide Web (HTTP, 80)</span><br><span class="line">Router(config)#access-list 100 permit tcp any host 172.16.4.2 eq 80 ?</span><br><span class="line">  dscp         Match packets with given dscp value</span><br><span class="line">  established  established</span><br><span class="line">  precedence   Match packets with given precedence value</span><br><span class="line">  &lt;cr&gt;</span><br><span class="line">Router(config)#access-list 100 permit tcp any host 172.16.4.2 eq 80 </span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="14-2-实验">14.2 实验</h3>
<h4 id="搭建拓扑-6">搭建拓扑</h4>
<ul>
<li>PC机 一台</li>
<li>服务器 一台</li>
<li>路由器 三台</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811164351517.png" alt="image-20230811164351517" style="zoom: 67%;" /> 
<h4 id="配置IP-3">配置IP</h4>
<ul>
<li>
<p>PC机配置</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811154814736.png" alt="image-20230811154814736" style="zoom:67%;" /> 
</li>
<li>
<p>服务器配置IP</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811154910102.png" alt="image-20230811154910102" style="zoom:67%;" /> 
</li>
<li>
<p>路由器配置端口IP</p>
<p>三个路由器按照图示配置端口IP，开启；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">（1）路由器R0</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 172.16.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 172.16.2.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">（2）路由器R1</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 172.16.2.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 3/0</span><br><span class="line">Router(config-if)#ip address 172.16.3.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">（3）路由器R2</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 172.16.3.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config-if)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 172.16.4.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="配置路由-3">配置路由</h4>
<ul>
<li>
<p>路由器配置路由</p>
<p>如图所示，三个路由器都只有直连网段的路由</p>
<ul>
<li>R0：1.0、2.0</li>
<li>R1：2.0、3.0</li>
<li>R2：3.0、4.0</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811160354745.png" alt="image-20230811160354745" style="zoom: 50%;" /> 
<p>因此，可以让R1拥有全网段的路由（配置1.0、4.0网段的静态路由）</p>
<p>其他两个路由器则把默认路由设置下一跳为R1，交给R1处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">（1）路由器R0</span><br><span class="line">Router(config)#ip route 0.0.0.0 0.0.0.0 172.16.2.2</span><br><span class="line"></span><br><span class="line">（2）路由器R1</span><br><span class="line">Router(config)#ip route 172.16.1.0 255.255.255.0 172.16.2.1</span><br><span class="line">Router(config)#ip route 172.16.4.0 255.255.255.0 172.16.3.2</span><br><span class="line"></span><br><span class="line">（3）路由器R2</span><br><span class="line">Router(config)#ip route 0.0.0.0 0.0.0.0 172.16.3.1</span><br></pre></td></tr></table></figure>
<p>再次查看三个路由器的路由表如下，即可</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811161112555.png" alt="image-20230811161112555" style="zoom: 50%;" /> 
</li>
<li>
<p>好的。</p>
<p>到这里，测试一下，已经可以ping通了。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811161222448.png" alt="image-20230811161222448" style="zoom:67%;" /> 
</li>
<li>
<p>开启服务器web服务</p>
<p>点开服务器Server0，点击服务Services，把HTTP、HTTPS改为On按钮（默认会自动开启，检查一下即可）</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811161302775.png" alt="image-20230811161302775" style="zoom:50%;" /> 
</li>
<li>
<p>主机访问服务器web访问</p>
<p>点开主机，打开web浏览器，输入服务器地址<code>172.16.4.2</code>回车，发现能够正常访问。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811161534602.png" alt="image-20230811161534602" style="zoom:67%;" /> 
</li>
</ul>
<h4 id="配置扩展ACL">配置扩展ACL</h4>
<ul>
<li>
<p>我们实际上希望主机只能够访问服务器的web服务，并不能ping通。</p>
<p>因此，要使用扩展访问控制列表，</p>
</li>
<li>
<p>扩展ACL控制</p>
<p>创建扩展ACL，允许访问TCP协议的80端口（即HTTP服务），禁止 ICMP协议；</p>
<p>进入端口，把该扩展ACL应用到端口的出口上；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">路由器R1设置</span><br><span class="line">Router(config)#access-list 100 permit tcp any host 172.16.4.2 eq 80 </span><br><span class="line">Router(config)#access-list 100 deny icmp any host 172.16.4.2 </span><br><span class="line">Router(config)#int se 3/0</span><br><span class="line">Router(config-if)#ip access-group 100 out</span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="14-3-测试">14.3 测试</h3>
<ul>
<li>至此，我们再次测试，发现
<ul>
<li>ping服务器不通</li>
<li>服务器的web服务能够正常访问</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811164258821.png" alt="image-20230811164258821" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230811164322105.png" alt="image-20230811164322105" style="zoom:67%;" /></p>
<h2 id="第十五章、网络地址转换NAT">第十五章、网络地址转换NAT</h2>
<h3 id="15-1-原理">15.1 原理</h3>
<ul>
<li>
<p><strong>NAT (Network Address Translation)</strong></p>
<p>又称为网络地址转换，用于实现私有网络和公有网络之间的互访。</p>
</li>
<li>
<p><strong>工作原理</strong></p>
<ul>
<li>
<p>NAT用来将内网地址和端口号转换成合法的公网地址和端口号，建立一个会话，与公网主机进行通信。</p>
</li>
<li>
<p>NTA外部的主机无法主动跟位于NAT内部的主机通信，NAT内部主机想要通信，必须主动和公网的一个IP通信，路由器负责建立一个映射关系，从而实现数据的转发。</p>
</li>
<li>
<p>数据包从内网到外网时，会转换源lP地址，由私网地址转换成公网地址</p>
</li>
<li>
<p>数据包从外网到内网时，会转换目的IP地址，由公网地址转换成私网地址</p>
</li>
</ul>
</li>
<li>
<p><strong>功能</strong><br>
NAT不仅能解决了IP地址不足的问题，而且还能够有效的避免来自网络外部的入侵，隐藏并保护网络内部的计算机</p>
<ul>
<li>
<p>宽带分享 ，这是NAT主机最大的功能</p>
</li>
<li>
<p>安全防护，NAT之内的PC联机到 nternet上面时，他所显示的IP是NAT主机的公网IP，所以client端的PC就具有一定程度的安全了，外界在进行portscan（端口扫描）的时候，就侦测不到源client端的PC</p>
</li>
</ul>
<p>优点：节省公有合法IP地址，处理地址重叠，增强灵活性，安全性</p>
<p>缺点：延迟增大，配置和维护的复杂性，不支持某些应用（比如VPN）</p>
</li>
<li>
<p><strong>分类</strong></p>
<ul>
<li>
<p>一对一</p>
<ul>
<li>
<p>静态转换</p>
<p>一对一，私有ip和共有ip的映射关系定下来就不会变了</p>
</li>
<li>
<p>动态转换</p>
<p>也是一对一，但是每次私有ip跟共有ip的映射关系都是不一样</p>
</li>
</ul>
</li>
<li>
<p>多对一</p>
<ul>
<li>
<p>端口多路复用NAPT</p>
<p>内部网络的所有主机均可共享一个合法外部IP地址实现对Internet的访问，从而可以最大限度地节约IP地址资源。同时，又可隐藏网络内部的所有主机，有效避免来自internet的攻击。</p>
<p>因此，网络中应用最多的就是端口多路复用方式。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>静态NAT</strong></p>
<p>静态NAT实现私网地址和公网地址的一对一转换。有多少个私网地址就需要配置多少个公网地址。</p>
<p>静态NAT<strong>不能节约</strong>公网地址，但可以起到<strong>隐藏内部网络</strong>的作用。</p>
<ul>
<li>
<p>内部网络向外部网络发送报文时，静态NAT将报文的源IP地址替换为对应的公网地址</p>
</li>
<li>
<p>外部网络向内部网络发送响应报文时，静态NAT将报文的目的地址替换为相应的私网地址。</p>
</li>
</ul>
</li>
<li>
<p><strong>动态NAT</strong></p>
<p>多个私网IP地址对应多个公网IP地址，基于地址池一对一映射。</p>
</li>
<li>
<p><strong>使用方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">配置静态NAT（config下）</span><br><span class="line">ip nat inside </span><br><span class="line">ip nat outside </span><br><span class="line">ip nat inside source static 192.168.1.2 222.0.1.2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="15-2-实验">15.2 实验</h3>
<h4 id="搭建拓扑-7">搭建拓扑</h4>
<ul>
<li>
<p>路由器Router-PT 两台</p>
</li>
<li>
<p>二层交换机2960 一台</p>
</li>
<li>
<p>服务器Server 一台</p>
</li>
<li>
<p>PC机 一台</p>
</li>
<li>
<p>连线</p>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812172932438.png" alt="image-20230812172932438" style="zoom: 80%;" />  
<h4 id="配置IP-4">配置IP</h4>
<ul>
<li>PC机配置IP，服务器配置IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812143215478.png" alt="image-20230812143215478" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812143136713.png" alt="image-20230812143136713" style="zoom:67%;" /></p>
<ul>
<li>
<p>二层交换机</p>
<p>不用动</p>
</li>
<li>
<p>路由器</p>
<p>R0、R1配置各端口IP</p>
<p>（注意，我们没有使用<code>222.0.1.2</code>，留着给后面作为NAT使用）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">（1）R0配置IP</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 222.0.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line"></span><br><span class="line">（2）R1配置IP</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 222.0.1.3 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 222.0.2.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="配置路由-4">配置路由</h4>
<ul>
<li>
<p>注意，这里192.168.x.x的网段是私有地址网段，</p>
<p>并不会被外部知道路由，只有R0知道私钥网段的路由。</p>
<p>因此，R1并不需要配置到192.168.x.x的路由。</p>
<p>（教学视频中却配置了，是不正确的，不需要配置。所以教学视频中下一步是完全能通信到192.168.1.2的。）</p>
<p>只需要配置R0到222.0.2.0网段的静态路由即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">对R0配置路由</span><br><span class="line">Router(config)#ip route 222.0.2.0 255.255.255.0 222.0.1.3</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>现在，注意，是不能够通信的，PC机是无法与内网服务器通信的。</p>
<p>为什么？因为外部主机无法直接通过私有地址去访问内部服务器。</p>
<p>因此，我们需要在内部服务器出口路由器上配置NAT，使得其在走出内部网络时，带着的是公有地址。</p>
<p>从而外部主机就可以通过公有地址来访问内部服务器了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812144308315.png" alt="image-20230812144308315" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812144332766.png" alt="image-20230812144332766" style="zoom: 67%;" /></p>
</li>
</ul>
<h4 id="配置NAT">配置NAT</h4>
<ul>
<li>
<p>在路由器R0上，配置一个静态NAT</p>
<p>我们把原本留着的<code>222.0.1.2</code>用来作为静态NAT的一个出口IP。</p>
<ul>
<li>指定内部端口</li>
<li>指定外部端口</li>
<li>配置静态NAT</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">在路由器R0上配置</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip nat inside </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip nat outside </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#ip nat inside source static 192.168.1.2 222.0.1.2</span><br><span class="line">Router(config)#end</span><br><span class="line"></span><br><span class="line">查看配置信息</span><br><span class="line">Router#show ip nat translations </span><br><span class="line">看到下面的内容即可</span><br><span class="line">Pro  Inside global     Inside local       Outside local      Outside global</span><br><span class="line">---  222.0.1.2         192.168.1.2        ---                ---</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="15-3-测试">15.3 测试</h3>
<ul>
<li>
<p>现在，内部服务器在外部实际上有一个公网IP了，就是<code>222.0.1.2</code>，</p>
<p>因此，外部主机只需要通过访问这个公网IP，就会访问到内部服务器。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812150106558.png" alt="image-20230812150106558" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812150122091.png" alt="image-20230812150122091" style="zoom:67%;" /></p>
</li>
</ul>
<h2 id="第十六章、网络端口地址转换NAPT">第十六章、网络端口地址转换NAPT</h2>
<h3 id="16-1-原理">16.1 原理</h3>
<ul>
<li>
<p><strong>端口多路复用 NATP</strong></p>
<p>PAT又称为NAPT (Network Address Port Translation)</p>
<p>它实现一个公网地址和多个私网地址之间的映射，因此可以<strong>节约公网地址</strong>。</p>
<p>PAT的基本原理是将不同私网地址的报文的源IP地址转换为同一公网地址，但他们被转换为该地址的不同端口号，因而仍然能够共享同一地址。</p>
<ul>
<li>
<p>作用</p>
<ul>
<li>
<p>改变数据包的IP地址和端口号</p>
</li>
<li>
<p>能够大量节约公网IP地址</p>
</li>
</ul>
</li>
<li>
<p>类型</p>
<ul>
<li>
<p>动态PAT，包括NAPT和Easy IP</p>
<p>NAPT：多个私网IP地址对应固定外网IP地址(比如200.1.1.10)，配置方法与动态NAT类似。</p>
<p>Easy IP：多个私网IP地址对应路由器外网接口公网IP地址(比如12.0.0.1)</p>
</li>
<li>
<p>静态PAT，包括NAT Server</p>
<p>端口映射，将私网地址端口映射到公网地址，实现内网服务器供外网用户访问</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="16-2-实验">16.2 实验</h3>
<h4 id="搭建拓扑-8">搭建拓扑</h4>
<ul>
<li>PC机 两台</li>
<li>服务器Server 一台</li>
<li>二层交换机 一台</li>
<li>路由器 两台</li>
<li>连线</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812171025568.png" alt="image-20230812171025568" style="zoom: 80%;" /> 
<h4 id="配置IP-5">配置IP</h4>
<ul>
<li>PC机配置IP</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812160151295.png" alt="image-20230812160151295" style="zoom: 67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812160215520.png" alt="image-20230812160215520" style="zoom:67%;" /></p>
<ul>
<li>服务器配置IP</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812160252391.png" alt="image-20230812160252391" style="zoom:67%;" /> 
<ul>
<li>
<p>路由器配置端口IP</p>
<p>R0、R1配置端口IP</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">（1）路由器R0配置</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 192.168.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 200.0.1.1 255.255.255.0</span><br><span class="line">Router(config-if)#clock rate 64000</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line"></span><br><span class="line">（2）路由器R1配置</span><br><span class="line">Router&gt;en</span><br><span class="line">Router#conf t</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip address 200.0.1.2 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip address 200.0.2.1 255.255.255.0</span><br><span class="line">Router(config-if)#no shutdown </span><br><span class="line">Router(config-if)#exit</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="配置路由-5">配置路由</h4>
<ul>
<li>
<p>分析网段</p>
<ul>
<li>
<p>外部网段</p>
<p><code>200.0.1.0</code></p>
<p><code>200.0.2.0</code></p>
</li>
<li>
<p>内部网段</p>
<p><code>192.168.1.0</code></p>
</li>
</ul>
</li>
<li>
<p>这里左边是内部网络，192.168.x.x网段是私有的，并不会直接被外部的路由器直接路由到。</p>
<p>因此，路由器R1只需要配置外部网段的路由即可，而外部的两个网段都是R1的直连网段，因此不需要配置。</p>
<p>路由器R0则是内部、外部网段均需要，内部网段是直连网段，不需要配置；外部网段的<code>2.0</code>网段需要配置一下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">只需要配置路由器R0的一个静态路由即可</span><br><span class="line">Router(config)#ip route 200.0.2.0 255.255.255.0 200.0.1.2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="配置NAPT">配置NAPT</h4>
<ul>
<li>
<p>其实，到现在，你要是去测试ping，会发现是请求超时。</p>
<img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812161819278.png" alt="image-20230812161819278" style="zoom:67%;" /> 
<blockquote>
<p>这就很有意思，为什么是请求超时？为什么不是不可抵达？</p>
<p>分析一下两个问题：</p>
<ul>
<li>
<p>PC机的包发出去，服务器收到了吗？</p>
<p>收到了！</p>
</li>
<li>
<p>服务器如果是收到了请求，服务器回复的包发出去，PC机收到了吗？为什么没收到？</p>
<p>显然是PC机没收到回复。</p>
<p>为什么没收到？因为路由器R1处并不能转发私有地址<code>192.168.1.0</code>网段的数据包，也没有这个网段的路由（你不能直接配置静态路由。实际情况中，外部路由器即便收到了私有地址的包，也是会直接丢弃的）</p>
</li>
</ul>
<p>所以，PC机发了出去，也送到了，可以迟迟收不到回复，所以是请求超时。</p>
</blockquote>
</li>
<li>
<p>进行NAPT网络端口转换配置</p>
<p>内部主机在出口路由器处，先转换为一个公有地址，再出去。</p>
<p>这样做，外部服务器回复时，也是向这个公有地址回复，</p>
<p>回复抵达出口路由器时，会自动转换回内部的私有地址，PC机就可以收到了。</p>
<ul>
<li>指定内部端口</li>
<li>指定外部端口</li>
<li>创建访问列表</li>
<li>创建IP地址池</li>
<li>配置NAPT：从访问列表映射到IP地址池</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Router(config)#int fa 0/0</span><br><span class="line">Router(config-if)#ip nat inside </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#int se 2/0</span><br><span class="line">Router(config-if)#ip nat outside </span><br><span class="line">Router(config-if)#exit</span><br><span class="line">Router(config)#access-list 1 permit 192.168.1.0 0.0.0.255 	</span><br><span class="line">解释：上面是创建一个标准访问控制列表（注意后面是反掩码）</span><br><span class="line">Router(config)#ip nat pool mypool 200.0.1.3 200.0.1.3 netmask 255.255.255.0 </span><br><span class="line">解释：上面是创建IP地址池，命名为mypool，写入起始地址、结束地址（这里是同一个，也就是说只有一个IP），后面写netmask+子网掩码</span><br><span class="line">Router(config)#ip nat inside source list 1 pool mypool overload </span><br><span class="line">解释：上面是配置NAPT，意思是把内网中编号1的访问列表的IP转换到名为mypool的地址池再出去，映射方式允许重载</span><br><span class="line">（若不允许重载，即，不带上overload，那么就是前面的动态NAT，需要一对一，地址池中的IP数量要够多）</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>如若猜测自己的配置可能哪里出问题，</p>
<p>可以使用命令<code>show run</code>查看配置信息，检查问题。</p>
</blockquote>
<h3 id="16-3-测试">16.3 测试</h3>
<ul>
<li>
<p>现在先看一下</p>
<p>在路由器R0上查看一下NAPT情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show ip nat translations</span><br></pre></td></tr></table></figure>
<p>你会发现，什么信息都没有，这是正常的。</p>
<p>只有有内部主机发起请求了，才会出现信息。</p>
</li>
<li>
<p>测试从PC机去ping以及访问 外部服务器。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812170255660.png" alt="image-20230812170255660" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812170343202.png" alt="image-20230812170343202" style="zoom:67%;" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812170437449.png" alt="image-20230812170437449" style="zoom:67%;" /> <img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/posts/computerNetwork/image-20230812170405578.png" alt="image-20230812170405578" style="zoom:67%;" /></p>
<ul>
<li>
<p>现在再看NAPT情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Router#show ip nat translations </span><br><span class="line">Pro  Inside global     Inside local       Outside local      Outside global</span><br><span class="line">tcp 200.0.1.3:1024     192.168.1.2:1025   200.0.2.2:80       200.0.2.2:80</span><br><span class="line">tcp 200.0.1.3:1025     192.168.1.3:1025   200.0.2.2:80       200.0.2.2:80</span><br></pre></td></tr></table></figure>
<p>这里就是PC机在访问时，进行的网络地址端口转换情况。</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://isSeymour.github.io/butterflyblog">isSeymour</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://isseymour.github.io/butterflyblog/2023/08/11/Cisco-ComputerNetworks/">https://isseymour.github.io/butterflyblog/2023/08/11/Cisco-ComputerNetworks/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://isSeymour.github.io/butterflyblog" target="_blank">isSeymour</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/butterflyblog/tags/%E8%AE%A1%E7%BD%91%E5%AE%9E%E9%AA%8C/">计网实验</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp" data-sites="wechat,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/pay/PAY1.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/pay/PAY1.jpg" alt="微信支付"/></a><div class="post-qr-code-desc">微信支付</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/pay/PAY2.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/pay/PAY2.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/butterflyblog/2023/08/04/Color-two/" title="双色素材收集"><img class="cover" src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">双色素材收集</div></div></a></div><div class="next-post pull-right"><a href="/butterflyblog/2023/08/12/Cisco-ComputerNetworks-Easy/" title="《Cisco计网实验》速查助记"><img class="cover" src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp" onerror="onerror=null;src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">《Cisco计网实验》速查助记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/butterflyblog/2023/08/12/Cisco-ComputerNetworks-Easy/" title="《Cisco计网实验》速查助记"><img class="cover" src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-12</div><div class="title">《Cisco计网实验》速查助记</div></div></a></div><div><a href="/butterflyblog/2024/05/09/ISP-Lab/" title="《信息安全工程》实验内容"><img class="cover" src="https://cdn.jsdelivr.net/gh/isSeymour/PicGo/posts/ISP-Lab/Page0.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-09</div><div class="title">《信息安全工程》实验内容</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/T6.jpg" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">isSeymour</div><div class="author-info__description">志之所趋，无远弗届，穷山距海，不能限也。</div></div><div class="card-info-data site-data is-center"><a href="/butterflyblog/archives/"><div class="headline">文章</div><div class="length-num">72</div></a><a href="/butterflyblog/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/butterflyblog/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/isSeymour/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://isSeymour.github.io/profile/" target="_blank" title="学术主页"><i class="fa-regular fa-address-card" style="color: #000000;"></i></a><a class="social-icon" href="https://github.com/isSeymour/" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="https://space.bilibili.com/79699613/" target="_blank" title="B站"><i class="fa-brands fa-bilibili" style="color: #000000;"></i></a><a class="social-icon" href="https://blog.csdn.net/m0_63205991/" target="_blank" title="CSDN"><i class="fa-solid fa-code" style="color: #000000;"></i></a><a class="social-icon" href="mailto:isSeymour@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">《Cisco计网实验》Notes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%95%BF%E6%96%87%E8%AD%A6%E5%91%8A%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-text">长文警告！！！</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%E3%80%81%E8%AE%A4%E8%AF%86%E8%BD%AF%E4%BB%B6"><span class="toc-text">第一章、认识软件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%AE%9E%E9%AA%8C"><span class="toc-text">1.1 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%B5%8B%E8%AF%95"><span class="toc-text">1.2 测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E8%AF%B4%E6%98%8E"><span class="toc-text">1.3 说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E3%80%81%E4%B8%89%E7%AB%A0%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AE%A1%E7%90%86"><span class="toc-text">第二、三章、交换机管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%8E%9F%E7%90%86"><span class="toc-text">2.1 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="toc-text">交换机命令行模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">2.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">2.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E5%88%92%E5%88%86"><span class="toc-text">第四章、交换机VLAN划分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%8E%9F%E7%90%86"><span class="toc-text">4.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">4.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">4.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%E3%80%81%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%AE%9E%E7%8E%B0VLAN%E9%97%B4%E8%B7%AF%E7%94%B1"><span class="toc-text">第五章、三层交换机实现VLAN间路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%8E%9F%E7%90%86"><span class="toc-text">5.1 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#VLAN%E9%97%B4%E8%B7%AF%E7%94%B1%E5%8E%9F%E7%90%86"><span class="toc-text">VLAN间路由原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-text">路由器与交换机</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">5.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">5.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E3%80%81%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90%E6%A0%91RSTP"><span class="toc-text">第六章、快速生成树RSTP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%8E%9F%E7%90%86"><span class="toc-text">6.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">6.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">6.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-text">第七章、路由器的基本配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%8E%9F%E7%90%86"><span class="toc-text">7.1 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8F"><span class="toc-text">路由器命令行模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">7.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">7.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E5%8D%95%E8%87%82%E8%B7%AF%E7%94%B1"><span class="toc-text">第八章、路由器单臂路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%8E%9F%E7%90%86"><span class="toc-text">8.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">8.2 实验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">8.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">第九章、路由器静态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%8E%9F%E7%90%86"><span class="toc-text">9.1 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E5%89%96%E6%9E%90"><span class="toc-text">案例剖析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-text">案例1(静态路由配置)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B2-%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-text">案例2(默认路由配置)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">9.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP"><span class="toc-text">配置IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="toc-text">配置路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">9.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8RIP%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">第十章、路由器RIP动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E5%8E%9F%E7%90%86"><span class="toc-text">10.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">10.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-2"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP%E3%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">配置IP、路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">10.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8OSPF%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-text">第十一章、路由器OSPF动态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%8E%9F%E7%90%86"><span class="toc-text">11.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">11.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-3"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP%E3%80%81%E8%B7%AF%E7%94%B1-2"><span class="toc-text">配置IP、路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">11.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%BC%E5%90%88%E8%B7%AF%E7%94%B1"><span class="toc-text">第十二章、路由器综合路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E5%8E%9F%E7%90%86"><span class="toc-text">12.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">12.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-4"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP%E3%80%81%E8%B7%AF%E7%94%B1-3"><span class="toc-text">配置IP、路由</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">12.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0%E3%80%81%E6%A0%87%E5%87%86IP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8"><span class="toc-text">第十三章、标准IP访问控制列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E5%8E%9F%E7%90%86"><span class="toc-text">13.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">13.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-5"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP-2"><span class="toc-text">配置IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-2"><span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%A0%87%E5%87%86ACL"><span class="toc-text">配置标准ACL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">13.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AB%A0%E3%80%81%E6%89%A9%E5%B1%95IP%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8"><span class="toc-text">第十四章、扩展IP访问控制列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-%E5%8E%9F%E7%90%86"><span class="toc-text">14.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">14.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-6"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP-3"><span class="toc-text">配置IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-3"><span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%89%A9%E5%B1%95ACL"><span class="toc-text">配置扩展ACL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">14.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0%E3%80%81%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAT"><span class="toc-text">第十五章、网络地址转换NAT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-%E5%8E%9F%E7%90%86"><span class="toc-text">15.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">15.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-7"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP-4"><span class="toc-text">配置IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-4"><span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AENAT"><span class="toc-text">配置NAT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">15.3 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AB%A0%E3%80%81%E7%BD%91%E7%BB%9C%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2NAPT"><span class="toc-text">第十六章、网络端口地址转换NAPT</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#16-1-%E5%8E%9F%E7%90%86"><span class="toc-text">16.1 原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-2-%E5%AE%9E%E9%AA%8C"><span class="toc-text">16.2 实验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%8B%93%E6%89%91-8"><span class="toc-text">搭建拓扑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEIP-5"><span class="toc-text">配置IP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-5"><span class="toc-text">配置路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AENAPT"><span class="toc-text">配置NAPT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-3-%E6%B5%8B%E8%AF%95"><span class="toc-text">16.3 测试</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/butterflyblog/2025/04/27/LLM4Rec_abc_5/" title="大模型推荐系统 (应用)"><img src="https://cdn.jsdelivr.net/gh/isSeymour/PicGo/posts/llm4rec_abc/5/llm4rec-abc-5-Page.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/404.jpg'" alt="大模型推荐系统 (应用)"/></a><div class="content"><a class="title" href="/butterflyblog/2025/04/27/LLM4Rec_abc_5/" title="大模型推荐系统 (应用)">大模型推荐系统 (应用)</a><time datetime="2025-04-27T08:00:00.000Z" title="发表于 2025-04-27 16:00:00">2025-04-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterflyblog/2025/04/26/LLM4Rec_abc_4/" title="大模型推荐系统（4）直接推荐范式"><img src="https://cdn.jsdelivr.net/gh/isSeymour/PicGo/posts/llm4rec_abc/4/llm4rec-abc-4-Page.png" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/404.jpg'" alt="大模型推荐系统（4）直接推荐范式"/></a><div class="content"><a class="title" href="/butterflyblog/2025/04/26/LLM4Rec_abc_4/" title="大模型推荐系统（4）直接推荐范式">大模型推荐系统（4）直接推荐范式</a><time datetime="2025-04-26T10:00:00.000Z" title="发表于 2025-04-26 18:00:00">2025-04-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/butterflyblog/2025/04/26/LLM4Rec_abc_3/" title="大模型推荐系统（3）微调范式"><img src="https://cdn.jsdelivr.net/gh/isSeymour/PicGo/posts/llm4rec_abc/3/llm4rec-abc-3-Page.webp" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/404.jpg'" alt="大模型推荐系统（3）微调范式"/></a><div class="content"><a class="title" href="/butterflyblog/2025/04/26/LLM4Rec_abc_3/" title="大模型推荐系统（3）微调范式">大模型推荐系统（3）微调范式</a><time datetime="2025-04-26T09:00:00.000Z" title="发表于 2025-04-26 17:00:00">2025-04-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Seymour0314/PicGo/blog/page_img/BK7.webp')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By isSeymour</div><div class="footer_custom_text">欢迎乘坐我的生活地铁！</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/butterflyblog/js/utils.js"></script><script src="/butterflyblog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const initGitalk = () => {
    const gitalk = new Gitalk(Object.assign({
      clientID: 'Ov23liAZxomGv7Hapw8g',
      clientSecret: 'f7cafde192c4ada8bef4b76952c422d90575cf8b',
      repo: 'gitalk',
      owner: 'isSeymour',
      admin: ['isSeymour'],
      id: '5fd58d310e5610f070303c363dfd4940',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async() => {
    if (typeof Gitalk === 'function') initGitalk()
    else {
      await getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
      await getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js')
      initGitalk()
    }
  }
  
  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/butterflyblog/js/search/local-search.js"></script></div></div></body></html>